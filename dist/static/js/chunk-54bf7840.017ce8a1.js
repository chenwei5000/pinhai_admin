(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54bf7840"],{4045:function(e,a,l){"use strict";l.r(a);var t=function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("el-dialog",{attrs:{title:"创建计划",visible:e.formVisible,width:"65%"},on:{"update:visible":function(a){e.formVisible=a}}},[l("fieldset",{staticClass:"panel-heading"},[l("legend",{staticClass:"panel-title"},[e._v("基本信息")]),e._v(" "),l("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.plan,rules:e.rules,"label-width":"100px",inline:!0}},[l("el-form-item",{attrs:{label:"开船时间",prop:"etdTime"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:e.plan.etdTime,callback:function(a){e.$set(e.plan,"etdTime",a)},expression:"plan.etdTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"编号"}},[l("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.plan.code,callback:function(a){e.$set(e.plan,"code",a)},expression:"plan.code"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"运输方式",prop:"type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.plan.type,callback:function(a){e.$set(e.plan,"type",a)},expression:"plan.type"}},[l("el-option",{attrs:{label:"海运",value:"海运"}}),e._v(" "),l("el-option",{attrs:{label:"空运",value:"空运"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"发货港口",prop:"portOfLoading"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.plan.portOfLoading,callback:function(a){e.$set(e.plan,"portOfLoading",a)},expression:"plan.portOfLoading"}},e._l(e.harbours,function(e,a){return l("el-option",{key:a+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"发货仓库",prop:"fromWarehouseId"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.plan.fromWarehouseId,callback:function(a){e.$set(e.plan,"fromWarehouseId",a)},expression:"plan.fromWarehouseId"}},e._l(e.fromWarehouses,function(e,a){return l("el-option",{key:a+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"收货仓库",prop:"toWarehouseId"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.plan.toWarehouseId,callback:function(a){e.$set(e.plan,"toWarehouseId",a)},expression:"plan.toWarehouseId"}},e._l(e.toWarehouses,function(e,a){return l("el-option",{key:a+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[l("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.plan.categoryId,callback:function(a){e.$set(e.plan,"categoryId",a)},expression:"plan.categoryId"}},e._l(e.categorys,function(e,a){return l("el-option",{key:a+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"负责人",prop:"merchandiserId"}},[l("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.plan.merchandiserId,callback:function(a){e.$set(e.plan,"merchandiserId",a)},expression:"plan.merchandiserId"}},e._l(e.users,function(e,a){return l("el-option",{key:a+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"是否打托："}},[l("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.plan.pallet,callback:function(a){e.$set(e.plan,"pallet",a)},expression:"plan.pallet"}},[e._v("是")]),e._v(" "),l("el-radio",{attrs:{label:"0",value:"0"},model:{value:e.plan.pallet,callback:function(a){e.$set(e.plan,"pallet",a)},expression:"plan.pallet"}},[e._v("否")])],1),e._v(" "),l("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"Oversize："}},[l("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.plan.oversize,callback:function(a){e.$set(e.plan,"oversize",a)},expression:"plan.oversize"}},[e._v("是")]),e._v(" "),l("el-radio",{attrs:{label:"2",value:"0"},model:{value:e.plan.oversize,callback:function(a){e.$set(e.plan,"oversize",a)},expression:"plan.oversize"}},[e._v("否")])],1),e._v(" "),l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.plan.detail,callback:function(a){e.$set(e.plan,"detail",a)},expression:"plan.detail"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(a){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.createPlan}},[e._v("确 定")])],1)])},r=[],s=(l("7f7f"),l("ac6a"),l("ec34")),o=l("c405"),n=l("c24f"),i=l("4080"),p=l("5c96"),u=null,c=function(){u=p["Loading"].service({fullscreen:!0})},d=function(){u&&u.close()},m={props:{},data:function(){return{fromWarehouses:[],toWarehouses:[],harbours:[],categorys:[],users:[],formVisible:!1,plan:{etdTime:"",code:"",type:"",portOfLoading:"",fromWarehouseId:"",toWarehouseId:"",categoryId:[],merchandiserId:[],referenceId:"",shipmentId:"",pallet:"",oversize:"",detail:""},rules:{etdTime:[{required:!0,message:"开船时间不能为空",trigger:"blur"}],type:[{required:!0,message:"运输方式不能为空",trigger:"blur"}],portOfLoading:[{required:!0,message:"发货港口不能为空",trigger:"blur"}],fromWarehouseId:[{required:!0,message:"发货仓库不能为空",trigger:"blur"}],toWarehouseId:[{required:!0,message:"收货仓库不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"分类不能为空",trigger:"blur"}],merchandiserId:[{required:!0,message:"负责人不能为空",trigger:"blur"}]}}},methods:{createPlan:function(){var e=this;this.$refs["form"].validate(function(a){if(!a)return!1;e.plan.category=e.plan.categoryId.join(","),e.plan.merchandiser=e.plan.merchandiserId.join(","),c(),e.global.axios.post("/linerShippingPlans",e.plan).then(function(a){if(200==a.status){var l=a.data,t=i["a"].generateEventTitle(l);e.$emit("addCalendarEvent",l,t),d(),e.formVisible=!1}})})}},mounted:function(){var e=this;this.$on("openDialog",function(a){e.formVisible=!0,e.plan.etdTime=a;var l=["etdTime","code","type","portOfLoading","fromWarehouseId","toWarehouseId","categoryId","merchandiserId","pallet","oversize","referenceId","shipmentId","detail"];l.forEach(function(l){e.plan[l]="etdTime"===l?a:"categoryId"===l||"merchandiserId"===l?[]:""});var t='/warehouses?filters={"groupOp":"AND","rules":[{"field":"status","op":"eq","data":"1"}]}&sort=type asc,name';e.global.axios(t).then(function(a){200==a.status&&a.data.forEach(function(a){"工厂仓"==a.type||"普通"==a.type||"虚拟仓"==a.type?e.fromWarehouses.push({value:a.id,label:a.name}):"海外仓"==a.type&&e.toWarehouses.push({value:a.id,label:a.name})})}),e.harbours=s["a"].getSelectNameOptions(),e.categorys=o["a"].getMineSelectProdcutNameOptions(),e.users=n["a"].getSelectNameOptions()})}},f=m,b=l("2877"),v=Object(b["a"])(f,t,r,!1,null,null,null);a["default"]=v.exports},4080:function(e,a,l){"use strict";l("b1ef"),l("4360");var t={generateEventTitle:function(e){if(!e)return null;var a="label-grey",l='&nbsp;&nbsp;<i class="el-icon-ship"></i>&nbsp;&nbsp;';if("空运"==e.type&&(l='&nbsp;&nbsp;<i class="el-icon-s-promotion"></i>&nbsp;&nbsp;'),e.code&&(l+="("+e.code+") "),e.portOfLoading&&(l+="["+e.portOfLoading+"] "),e.categoryName&&(l+=e.categoryName),e.status>5&&e.status<11)switch(e.status){case 6:l+=" (SHIPPED)";break;case 7:l+=" (IN_TRANSIT)";break;case 8:l+=" (DELIVERED)";break;case 9:l+=" (CHECKED_IN)";break;case 10:l+=" (RECEIVING)";break}return a=11==e.status?"label-inverse":12==e.status?"label-pink":e.status>=6?"label-info":e.overdue?"label-danger":1==e.status?"label-grey":2==e.status?"label-yellow":3==e.status?"label-success":"label-pink",{className:a,title:l}}};a["a"]=t}}]);