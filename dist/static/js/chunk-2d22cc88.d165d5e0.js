(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22cc88"],{f569:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",width:"80%",top:"20px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:e.rules,model:e.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"序号",prop:"sortNum"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.sortNum,callback:function(t){e.$set(e.detailItem,"sortNum",t)},expression:"detailItem.sortNum"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"SKU编码",prop:"skuCode"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.skuCode,callback:function(t){e.$set(e.detailItem,"skuCode",t)},expression:"detailItem.skuCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"箱码",prop:"boxCode"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.boxCode,callback:function(t){e.$set(e.detailItem,"boxCode",t)},expression:"detailItem.boxCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"产品名",prop:"productId"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.productId,callback:function(t){e.$set(e.detailItem,"productId",t)},expression:"detailItem.productId"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"发货数量(箱)",prop:"shippedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.shippedCartonQty,callback:function(t){e.$set(e.detailItem,"shippedCartonQty",t)},expression:"detailItem.shippedCartonQty"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"存放货位",prop:"storageLocationId"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.storageLocationId,callback:function(t){e.$set(e.detailItem,"storageLocationId",t)},expression:"detailItem.storageLocationId"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"总发货件数",prop:"shippedQty"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.shippedQty,callback:function(t){e.$set(e.detailItem,"shippedQty",t)},expression:"detailItem.shippedQty"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"收货数量",prop:"receivedQty"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.receivedQty,callback:function(t){e.$set(e.detailItem,"receivedQty",t)},expression:"detailItem.receivedQty"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"异常备注",prop:"receivedNote"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.receivedNote,callback:function(t){e.$set(e.detailItem,"receivedNote",t)},expression:"detailItem.receivedNote"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"合计箱数",prop:"receivedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.detailItem.receivedCartonQty,callback:function(t){e.$set(e.detailItem,"receivedCartonQty",t)},expression:"detailItem.receivedCartonQty"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSave}},[e._v("\n            保存\n          ")])],1)],1)],1)],1)],1):e._e()},a=[],o=(i("c5f6"),i("d186"),i("c971"),i("b99d")),d={components:{},props:{primaryId:{type:Number,default:null}},computed:{dialogTitle:function(){return null==this.detailItemId?"添加采购入库明细":"修改采购入库明细"}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,url:"/procurementReceivedOrderItems",relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],detailItemId:null,detailItem:{sortNum:null,skuCode:null,boxCode:null,shippedCartonQty:null,storageLocationId:null,shippedQty:null,receivedQty:null,receivedNote:null,receivedCartonQty:null,productId:null},rules:{skuCode:[o["a"].required],receivedQty:[o["a"].required]}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var e=this;if(this.detailItemId){this.loading=!0;var t="".concat(this.url,"/").concat(this.detailItemId);this.relations&&this.relations.length>0&&(t+="?relations="+JSON.stringify(this.relations)),this.global.axios.get(t).then(function(t){var i=t.data,l=i||{};e.detailItem=l,e.detailItem.cartonSpecId=l.cartonSpecId+"",e.detailItem.priority=l.priority+"",e.loading=!1})}else this.detailItem={skuCode:"",priorityNote:"",cartonSpecId:null,priority:"2",safetyStockWeek:10,numberOfCarton:null,cartonQty:1,procurementPlanId:this.primaryId}},openDialog:function(e){this.detailItemId=e,this.dialogVisible=!0,this.initData()},onSave:function(){var e=this;this.$refs.detailItem.validate(function(t){if(!t)return!1;e.loading=!0,e.confirmLoading=!0;var i="post",l=e.url+"";!e.detailItemId&&e.detailItemId>0&&(i="put",l="".concat(e.url,"/").concat(e.detailItemId));var a=JSON.parse(JSON.stringify(e.detailItem));e.global.axios[i](l,a).then(function(t){e.$message.info("修改成功"),e.loading=!1,e.confirmLoading=!1,e.dialogVisible=!1,e.$emit("modifyCBEvent",t.data)}).catch(function(t){e.loading=!1,e.confirmLoading=!1})})}}},r=d,n=i("2877"),s=Object(n["a"])(r,l,a,!1,null,"4fb385f6",null);t["default"]=s.exports}}]);