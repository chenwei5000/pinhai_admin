(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed097c2"],{"4a74":function(t,e,i){},"61a5":function(t,e,i){"use strict";var n=i("4a74"),a=i.n(n);a.a},a21b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ph-form"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"editObject",attrs:{rules:t.rules,model:t.editObject,"status-icon":"",inline:"","label-position":"right","label-width":"120px","inline-message":""}},[i("fieldset",{staticClass:"panel-heading"},[i("legend",{staticClass:"panel-title"},[t._v("交货要求\n        "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            销售对采购计划的要求\n          ")]),t._v(" "),i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1),t._v(" "),t.primary.procurementPlan.note?i("el-row",{domProps:{innerHTML:t._s(t.primary.procurementPlan.formatNote)}}):i("el-row",[t._v("\n        无\n      ")])],1),t._v(" "),i("fieldset",{staticClass:"panel-heading",staticStyle:{"margin-top":"15px"}},[i("legend",{staticClass:"panel-title"},[t._v("采购单信息\n        "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            采购单相关信息\n          ")]),t._v(" "),i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"供货商",prop:"supplierId"}},[i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.editObject.supplier.name))])])],1),t._v(" "),i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"收货仓库",prop:"warehouseId"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择收货仓库"},model:{value:t.editObject.warehouseId,callback:function(e){t.$set(t.editObject,"warehouseId",e)},expression:"editObject.warehouseId"}},t._l(t.warehouseSelectOptions,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"采购的商品接收的仓库",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"预计完成日期",prop:"supplierId"}},[i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.editObject.formatOtdTime?t.editObject.formatOtdTime:"无"))])])],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"结算方式",prop:"settlementMethod"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择结算方式"},model:{value:t.editObject.settlementMethod,callback:function(e){t.$set(t.editObject,"settlementMethod",e)},expression:"editObject.settlementMethod"}},t._l(t.settlementMethodSelectOptions,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"采购单的结算方式。货到付款方式不用走预付款流程。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"结算货币",prop:"currencyId"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择结算货币"},model:{value:t.editObject.currencyId,callback:function(e){t.$set(t.editObject,"currencyId",e)},expression:"editObject.currencyId"}},t._l(t.currencySelectOptions,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"使用什么货币跟供货商进行结算。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),i("el-col",{attrs:{md:8}},[i("el-form-item",{attrs:{label:"帐期",prop:"accountPeriod"}},[i("el-input-number",{staticStyle:{width:"155px"},attrs:{min:1,step:1,max:365,label:"帐期"},model:{value:t.editObject.accountPeriod,callback:function(e){t.$set(t.editObject,"accountPeriod",e)},expression:"editObject.accountPeriod"}}),t._v("\n            天\n            "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"生产商、批发商向零售商供货后，直至零售商付款的这段时间周期",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[t.hasEdit?i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.onSave}},[t._v("\n            保存基本信息\n          ")]):t._e()],1)],1)],1)],1)],1)},a=[],s=(i("ac6a"),i("ed08"),i("c971")),l=i("b9a9"),o={components:{},props:{primary:{type:[Object],default:{}}},computed:{hasEdit:function(){return!([0,8].indexOf(this.primary.status)>-1)},hasCategory:function(){return null==this.editObject.categoryId||0==this.editObject.categoryId.length}},data:function(){return{loading:!1,confirmLoading:!1,warehouseSelectOptions:[],settlementMethodSelectOptions:[],currencySelectOptions:[],selCurrency:{},editObject:{id:null,supplierId:null,warehouseId:null,settlementMethod:null,currencyId:null,accountPeriod:null,supplier:{name:""}},rules:{supplierId:[{required:!0,message:"必须输入",trigger:"blur"}],warehouseId:[{required:!0,message:"必须输入",trigger:"blur"}],settlementMethod:[{required:!0,message:"必须输入",trigger:"blur"}],currencyId:[{required:!0,message:"必须输入",trigger:"blur"}],accountPeriod:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){this.loading=!0,this.primary?(this.editObject=JSON.parse(JSON.stringify(this.primary)),this.editObject.settlementMethod=this.editObject.settlementMethod+"",this.settlementMethodSelectOptions=s["a"].getSelectOptions("SettlementMethod"),this.initCurrencData(),this.initWarehouseData(),this.loading=!1):(this.$message.error("无效的采购计划!"),this.loading=!1)},initWarehouseData:function(){var t=this;this.loading=!0;var e="/warehouses",i=[{field:"status",op:"eq",data:"1"},{field:"type",op:"in",data:"普通,原料仓,工厂仓"}];e+="?filters="+JSON.stringify({groupOp:"AND",rules:i}),this.global.axios.get(e).then(function(e){var i=e.data||[];t.warehouseSelectOptions=[],i.forEach(function(e){t.warehouseSelectOptions.push(e)}),t.loading=!1}).catch(function(e){t.loading=!1})},initCurrencData:function(){var t=this;this.loading=!0,l["a"].getCurrencies().then(function(e){var i=e||[];t.currencySelectOptions=[],i.forEach(function(e){t.currencySelectOptions.push(e)}),t.loading=!1}).catch(function(e){t.loading=!1})},onSave:function(){var t=this;this.$confirm("注意保存基本信息只会修改对应的参数，您是否继续？","提示",{type:"warning",beforeClose:function(e,i,n){"confirm"==e?(n(),t.modifyObject()):n()}}).catch(function(t){})},modifyObject:function(){var t=this,e=JSON.parse(JSON.stringify(this.editObject)),i=this.$loading({lock:!0,text:"保存中..",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.global.axios.put("/procurementOrders/".concat(this.editObject.id),e).then(function(e){var n=e.data;t.$message({type:"success",message:"操作成功"}),i.close(),t.$emit("modifyCBEvent",n)}).catch(function(t){i.close()})},onCateChange:function(t){this.initGroupData(t),this.initWarehouseData(t)}}},r=o,c=(i("61a5"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"3ac6efb0",null);e["default"]=d.exports}}]);