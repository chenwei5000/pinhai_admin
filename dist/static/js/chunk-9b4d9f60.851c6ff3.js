(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b4d9f60"],{4080:function(e,t,r){"use strict";r("b1ef"),r("4360");var a={generateEventTitle:function(e){if(!e)return null;var t="label-grey",r='&nbsp;&nbsp;<i class="el-icon-ship"></i>&nbsp;&nbsp;';if("空运"==e.type&&(r='&nbsp;&nbsp;<i class="el-icon-s-promotion"></i>&nbsp;&nbsp;'),e.code&&(r+="("+e.code+") "),e.portOfLoading&&(r+="["+e.portOfLoading+"] "),e.categoryName&&(r+=e.categoryName),e.status>5&&e.status<11)switch(e.status){case 6:r+=" (SHIPPED)";break;case 7:r+=" (IN_TRANSIT)";break;case 8:r+=" (DELIVERED)";break;case 9:r+=" (CHECKED_IN)";break;case 10:r+=" (RECEIVING)";break}return t=11==e.status?"label-inverse":12==e.status?"label-pink":e.status>=6?"label-info":e.overdue?"label-danger":1==e.status?"label-grey":2==e.status?"label-yellow":3==e.status?"label-success":"label-pink",{className:t,title:r}}};t["a"]=a},fd4c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"编辑计划",visible:e.formVisible,width:"65%"},on:{"update:visible":function(t){e.formVisible=t}}},[r("fieldset",{staticClass:"panel-heading"},[r("legend",{staticClass:"panel-title"},[e._v("基本信息")]),e._v(" "),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px",inline:!0}},[r("el-form-item",{attrs:{label:"开船时间",prop:"etdTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:e.form.etdTime,callback:function(t){e.$set(e.form,"etdTime",t)},expression:"form.etdTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"运输方式",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{label:"海运",value:"海运"}}),e._v(" "),r("el-option",{attrs:{label:"空运",value:"空运"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"发货港口",prop:"portOfLoading"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.portOfLoading,callback:function(t){e.$set(e.form,"portOfLoading",t)},expression:"form.portOfLoading"}},e._l(e.harbours,function(e,t){return r("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"发货仓库",prop:"fromWarehouseId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fromWarehouseId,callback:function(t){e.$set(e.form,"fromWarehouseId",t)},expression:"form.fromWarehouseId"}},e._l(e.fromWarehouses,function(e,t){return r("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"收货仓库",prop:"toWarehouseId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.toWarehouseId,callback:function(t){e.$set(e.form,"toWarehouseId",t)},expression:"form.toWarehouseId"}},e._l(e.toWarehouses,function(e,t){return r("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[r("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}},e._l(e.categorys,function(e,t){return r("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"merchandiserId"}},[r("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.form.merchandiserId,callback:function(t){e.$set(e.form,"merchandiserId",t)},expression:"form.merchandiserId"}},e._l(e.users,function(e,t){return r("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"FBA ID"}},[r("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.shipmentId,callback:function(t){e.$set(e.form,"shipmentId",t)},expression:"form.shipmentId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Reference ID"}},[r("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.referenceId,callback:function(t){e.$set(e.form,"referenceId",t)},expression:"form.referenceId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否打托："}},[r("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.form.pallet,callback:function(t){e.$set(e.form,"pallet",t)},expression:"form.pallet"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0",value:"0"},model:{value:e.form.pallet,callback:function(t){e.$set(e.form,"pallet",t)},expression:"form.pallet"}},[e._v("否")])],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"Oversize："}},[r("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.form.oversize,callback:function(t){e.$set(e.form,"oversize",t)},expression:"form.oversize"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"2",value:"0"},model:{value:e.form.oversize,callback:function(t){e.$set(e.form,"oversize",t)},expression:"form.oversize"}},[e._v("否")])],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])},l=[],o=(r("7f7f"),r("ac6a"),r("28a5"),r("ec34")),s=r("c405"),i=r("c24f"),n=r("4080"),m=r("5c96"),c=null,f=function(){c=m["Loading"].service({fullscreen:!0})},u=function(){c&&c.close()},d={props:{},data:function(){return{fromWarehouses:[],toWarehouses:[],harbours:[],categorys:[],users:[],formVisible:!1,event_id:"",form:{etdTime:"",code:"",type:"",portOfLoading:"",fromWarehouseId:"",toWarehouseId:"",categoryId:[],merchandiserId:[],pallet:"",oversize:"",detail:""},rules:{etdTime:[{required:!0,message:"开船时间不能为空",trigger:"blur"}],type:[{required:!0,message:"运输方式不能为空",trigger:"blur"}],portOfLoading:[{required:!0,message:"发货港口不能为空",trigger:"blur"}],fromWarehouseId:[{required:!0,message:"发货仓库不能为空",trigger:"blur"}],toWarehouseId:[{required:!0,message:"收货仓库不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"分类不能为空",trigger:"blur"}],merchandiserId:[{required:!0,message:"负责人不能为空",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.category=e.form.categoryId.join(","),e.form.merchandiser=e.form.merchandiserId.join(","),f(),e.global.axios.put("/linerShippingPlans/".concat(e.event_id),e.form).then(function(t){if(200==t.status){var r=t.data,a=n["a"].generateEventTitle(r);e.$emit("editCalendarEvent",r,a),u(),e.formVisible=!1}})})}},mounted:function(){var e=this;this.$on("openDialog",function(t){e.event_id=t,e.global.axios.get("/linerShippingPlans/".concat(t)).then(function(t){200===t.status&&(e.formVisible=!0,e.form=t.data,e.form.etdTime=e.form.formatEtdTime,e.form.categoryId=e.form.categoryName.split(","),e.form.merchandiserId=e.form.merchandiserName.split(","),e.form.pallet="".concat(e.form.pallet),e.form.oversize="".concat(e.form.oversize))});var r='/warehouses?filters={"groupOp":"AND","rules":[{"field":"status","op":"eq","data":"1"}]}&sort=type asc,name';e.global.axios(r).then(function(t){200==t.status&&t.data.forEach(function(t){"工厂仓"==t.type||"普通"==t.type||"虚拟仓"==t.type?e.fromWarehouses.push({value:t.id,label:t.name}):"海外仓"==t.type&&e.toWarehouses.push({value:t.id,label:t.name})})}),e.harbours=o["a"].getSelectNameOptions(),e.categorys=s["a"].getMineSelectProdcutNameOptions(),e.users=i["a"].getSelectNameOptions()})}},p=d,b=r("2877"),v=Object(b["a"])(p,a,l,!1,null,null,null);t["default"]=v.exports}}]);