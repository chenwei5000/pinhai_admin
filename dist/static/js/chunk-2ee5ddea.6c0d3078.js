(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ee5ddea"],{2056:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-card",{staticClass:"todo-box-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("svg-icon",{attrs:{"icon-class":"skill"}}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v("未处理任务")])],1),t._v(" "),e("el-collapse",t._l(t.filteredTodos,function(n,i){return e("el-collapse-item",{key:n.id,attrs:{name:n.id}},[e("template",{slot:"title"},[e("div",{staticClass:"todo-title"},[e("i",{staticClass:"header-icon el-icon-info",staticStyle:{color:"#f25542","margin-right":"5px"}}),t._v("\n          "+t._s(n.notice.title)+"\n        ")])]),t._v(" "),e("div",{staticClass:"todo-centent"},[e("p",[t._v("\n          "+t._s(n.notice.content)+"\n        ")]),t._v(" "),e("p",{staticStyle:{"text-align":"right"}},[e("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-success"},on:{click:function(e){return t.completeTodo(n)}}},[t._v("已完成")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.goTodo(n)}}},[t._v("去处理")])],1)])],2)}),1),t._v(" "),e("footer",{staticClass:"footer"},[e("span",[e("strong",[t._v("还有"+t._s(t.remaining)+"个任务未处理")])])])],1)},o=[],s=(e("6b54"),"todos"),c={all:function(t){return t},active:function(t){return t.filter(function(t){return!t.done})},completed:function(t){return t.filter(function(t){return t.done})}},r={components:{},filters:{pluralize:function(t,n){return 1===t?n:n+"s"},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},data:function(){return{url:"/userNotices",visibility:"all",filters:c,todos:[]}},computed:{allChecked:function(){return this.todos.every(function(t){return t.done})},filteredTodos:function(){return console.log(c[this.visibility](this.todos)),c[this.visibility](this.todos)},remaining:function(){return this.todos.filter(function(t){return!t.done}).length}},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){var t=this,n=this.url,e=[];e.push({field:"isRead",op:"eq",data:"0"}),n+="?filters="+JSON.stringify({groupOp:"AND",rules:e});var i=["notice"];n+="&relations="+JSON.stringify(i),this.global.axios.get(n).then(function(n){var e=n.data||[];t.todos=e||[]}).catch(function(t){})},setLocalStorage:function(){window.localStorage.setItem(s,JSON.stringify(this.todos))},goTodo:function(t){this.$message.info("跳转对应的单据!")},completeTodo:function(t){var n=this;this.$confirm("确认该任务已经完成了吗?","提示",{type:"warning",beforeClose:function(e,i,o){if("confirm"==e){if(i.confirmButtonLoading=!0,t.done=!t.done,n.setLocalStorage(),n.onDelete)return void n.onDelete(n.hasSelect?n.single?n.selected[0]:n.selected:row).then(function(t){n.showMessage(!0),o(),n.getList()}).catch(function(t){}).finally(function(t){i.confirmButtonLoading=!1});if(n.hasSelect){var s=n.selected.map(function(t){return t[n.id]}).toString();s||""!=s||(s=row[n.id]),n.global.axios.delete(n.url+"/"+s).then(function(t){i.confirmButtonLoading=!1,o(),n.showMessage(!0),n.getList()}).catch(function(t){i.confirmButtonLoading=!1})}else n.global.axios.delete(n.url+"/"+row[n.id]).then(function(t){i.confirmButtonLoading=!1,o(),n.showMessage(!0),n.getList()}).catch(function(t){i.confirmButtonLoading=!1});n.afterConfirm()}else o()}}).catch(function(t){})}}},a=r,l=(e("457c"),e("2877")),u=Object(l["a"])(a,i,o,!1,null,null,null);n["default"]=u.exports},"457c":function(t,n,e){"use strict";var i=e("7eaa"),o=e.n(i);o.a},"7eaa":function(t,n,e){}}]);