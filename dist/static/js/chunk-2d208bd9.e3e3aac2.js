(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208bd9"],{a5a0:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return t.dialogVisible?l("el-dialog",{attrs:{title:t.dialogTitle,"append-to-body":"",width:"85%",top:"20vh",visible:t.dialogVisible},on:{close:t.closeDialog,"update:visible":function(e){t.dialogVisible=e}}},[l("div",{staticClass:"ph-form"},[l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:t.rules,model:t.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[l("el-row",[l("el-col",{attrs:{md:8}},[l("el-form-item",{staticStyle:{"font-size":"12px"},attrs:{label:"SKU"}},[t._v("\n            "+t._s(t.detailItem.skuCode)+"\n          ")])],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{staticStyle:{"font-size":"12px"},attrs:{label:"产品名"}},[t._v("\n            "+t._s(t.detailItem.product.name)+"\n          ")])],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{staticStyle:{"font-size":"12px"},attrs:{label:"结算货币"}},[t._v("\n            "+t._s(t.selCurrency.name)+"\n          ")])],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"供货商",prop:"supplierId"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择供货商,可筛选"},model:{value:t.detailItem.supplierId,callback:function(e){t.$set(t.detailItem,"supplierId",e)},expression:"detailItem.supplierId"}},t._l(t.supplierSelectOptions,function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产品供货商，从哪个厂商采购。",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"箱规",prop:"cartonSpecId"}},[l("el-select",{attrs:{filterable:"",placeholder:"外箱包装材料规格,可筛选"},model:{value:t.detailItem.cartonSpecId,callback:function(e){t.$set(t.detailItem,"cartonSpecId",e)},expression:"detailItem.cartonSpecId"}},t._l(t.cartonspecSelectOptions,function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产品外箱包装材料规格。不输入使用产品上默认的箱规",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"装箱数",prop:"numberOfCarton"}},[l("el-input-number",{staticStyle:{width:"150px"},attrs:{precision:0,min:1,step:1,max:1e5,label:"装箱数"},model:{value:t.detailItem.numberOfCarton,callback:function(e){t.$set(t.detailItem,"numberOfCarton",e)},expression:"detailItem.numberOfCarton"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"一箱有多少个产品.",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"采购单价",prop:"price"}},[l("el-input-number",{staticStyle:{width:"175px"},attrs:{precision:2,min:1,step:1,max:1e6,label:"采购价"},model:{value:t.detailItem.product.price,callback:function(e){t.$set(t.detailItem.product,"price",e)},expression:"detailItem.product.price"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产品的采购价格。",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"采购箱数",prop:"purchaseOrderCartonQty"}},[l("el-input-number",{staticStyle:{width:"175px"},attrs:{precision:3,min:1,step:1,max:1e6,label:"采购箱数"},model:{value:t.detailItem.purchaseOrderCartonQty,callback:function(e){t.$set(t.detailItem,"purchaseOrderCartonQty",e)},expression:"detailItem.purchaseOrderCartonQty"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"采购箱数,支持3位小树。",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"采购件数"}},[t._v("\n            "+t._s(t.orderQty)+" 件\n          ")])],1)],1),t._v(" "),l("hr"),t._v(" "),l("el-row",{staticStyle:{"text-align":"right","font-size":"13px","font-weight":"bold"}},[t._v("\n        总额: "+t._s(t._f("currency")(t.amount,t.selCurrency.symbolLeft))+"\n      ")])],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.onSave}},[t._v("保 存")]),t._v(" "),l("el-button",{on:{click:t.closeDialog}},[t._v("取 消")])],1)]):t._e()},a=[],r=(l("ac6a"),l("b99d")),o=l("a6b9"),n=l("d186"),s=l("ed08"),c={components:{},props:{},filters:{currency:s["b"]},computed:{orderQty:function(){return this.calOrderQty()},amount:function(){return this.calAmount()},dialogTitle:function(){return null==this.detailItemId?"添加采购计划明细":"修改采购计划明细"},hasEdit:function(){return!0}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,detailItem:{},selCurrency:{},supplierSelectOptions:[],cartonspecSelectOptions:[],rules:{supplierId:[r["a"].required],cartonSpecId:[r["a"].required],price:[r["a"].number],numberOfCarton:[r["a"].integer],purchaseOrderCartonQty:[r["a"].number]}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){this.supplierSelectOptions=o["a"].getSelectOptions(),this.cartonspecSelectOptions=n["a"].getSelectOptions()},openDialog:function(t,e){this.detailItem=t,this.selCurrency=e,this.detailItem.supplierId=t.supplierId+"",this.detailItem.cartonSpecId=t.cartonSpecId+"",this.dialogVisible=!0,this.initData()},closeDialog:function(){this.dialogVisible=!1,this.loading=!1,this.confirmLoading=!1,this.detailItemId=null,this.detailItem=null,this.cartonspecSelectOptions=[],this.prioritySelectOptions=[]},calOrderQty:function(){return(this.detailItem.purchaseOrderCartonQty*this.detailItem.numberOfCarton).toFixed(0)},calAmount:function(){return(this.detailItem.product.price*this.calOrderQty()).toFixed(2)},onSave:function(){var t=this;this.$refs.detailItem.validate(function(e){if(!e)return!1;t.loading=!0,t.confirmLoading=!0,t.detailItem.purchaseOrderQty=t.calOrderQty(),t.detailItem.purchaseOrderAmount=t.calAmount(),t.supplierSelectOptions.forEach(function(e){e.value==t.detailItem.supplierId+""&&(t.detailItem.supplierName=e.label,t.detailItem.product.supplier||(t.detailItem.product.supplier={name:e.label,id:t.detailItem.supplierId}))}),t.cartonspecSelectOptions.forEach(function(e){e.value==t.detailItem.cartonSpecId+""&&(t.detailItem.cartonSpecCode=e.label)}),t.$emit("modifyDetailCBEvent",t.detailItem),t.loading=!1,t.confirmLoading=!1,t.closeDialog()})}}},d=c,p=l("2877"),u=Object(p["a"])(d,i,a,!1,null,"29f325b0",null);e["default"]=u.exports}}]);