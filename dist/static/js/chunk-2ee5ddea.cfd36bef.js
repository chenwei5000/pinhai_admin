(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ee5ddea"],{2056:function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("el-card",{staticClass:"todo-box-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("svg-icon",{attrs:{"icon-class":"skill"}}),t._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[t._v("未处理任务")])],1),t._v(" "),n("el-collapse",t._l(t.filteredTodos,function(i,e){return n("el-collapse-item",{key:i.id,attrs:{name:i.id}},[n("template",{slot:"title"},[n("div",{staticClass:"todo-title"},[n("i",{staticClass:"header-icon el-icon-info",staticStyle:{color:"#f25542","margin-right":"5px"}}),t._v(t._s(i.notice.title)+"\n          ")])]),t._v(" "),n("div",{staticClass:"todo-centent"},[n("p",{domProps:{innerHTML:t._s(t.br(i.notice.content))}}),t._v(" "),n("p",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-success"},on:{click:function(n){return t.completeTodo(i)}}},[t._v("已完成")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.goTodo(i)}}},[t._v("处理")])],1)])],2)}),1),t._v(" "),n("footer",{staticClass:"footer"},[n("span",[n("strong",[t._v("还有"+t._s(t.remaining)+"个任务未处理")])])])],1),t._v(" "),n("editPlanDialog",{ref:"editPlanDialog",on:{modifyCBEvent:t.modifyPlanCBEvent}})],1)},o=[],a=n("d3cd"),c=n("ed08"),r={all:function(t){return t},active:function(t){return t.filter(function(t){return 0==t.isRead})},completed:function(t){return t.filter(function(t){return 1==t.isRead})}},s={components:{editPlanDialog:a["default"]},filters:{pluralize:function(t,i){return 1===t?i:i+"s"},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},data:function(){return{url:"/userNotices",visibility:"all",filters:r,todos:[]}},computed:{filteredTodos:function(){return r[this.visibility](this.todos)},remaining:function(){return this.todos.filter(function(t){return 0==t.isRead}).length}},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{br:function(t){return Object(c["g"])(t)},initData:function(){var t=this,i=this.url,n=[];n.push({field:"isRead",op:"eq",data:"0"}),i+="?filters="+JSON.stringify({groupOp:"AND",rules:n});var e=["notice"];i+="&relations="+JSON.stringify(e),this.global.axios.get(i).then(function(i){var n=i.data||[];t.todos=n||[]}).catch(function(t){})},doComplete:function(t,i,n){var e=this;t&&t.id&&this.global.axios.put(this.url+"/read/"+t.id).then(function(t){i.confirmButtonLoading=!1,n(),e.initData()}).catch(function(t){i.confirmButtonLoading=!1})},modifyPlanCBEvent:function(){},goTodo:function(t){t&&t.notice&&"PROCUREMENT_PLAN"==t.notice.targetType&&this.$refs.editPlanDialog.openDialog(t.notice.target)},completeTodo:function(t){var i=this;this.$confirm("确认该任务已经完成了吗?","提示",{type:"warning",beforeClose:function(n,e,o){"confirm"==n?(e.confirmButtonLoading=!0,i.doComplete(t,e,o)):o()}}).catch(function(t){})}}},l=s,u=(n("457c"),n("2877")),d=Object(u["a"])(l,e,o,!1,null,null,null);i["default"]=d.exports},"457c":function(t,i,n){"use strict";var e=n("7eaa"),o=n.n(e);o.a},"7eaa":function(t,i,n){}}]);