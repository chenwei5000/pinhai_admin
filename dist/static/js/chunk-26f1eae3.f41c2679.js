(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26f1eae3","chunk-5e62adbb"],{"127b":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page-container"},[e("aside",[t._v("\n    为了保证本采购计划的执行，需要指派对应的采购负责人，可多选。指派的采购负责人将会收到对应的邮件和系统消息提醒。\n    默认会自动把对应品类的采购负责人自动选中。\n  ")]),t._v(" "),e("h5",[t._v("采购负责人：")]),t._v(" "),t.completed?e("person",{ref:"person",attrs:{primary:t.primary},on:{reloadCBEvent:t.reloadCBEvent}}):t._e(),t._v(" "),e("el-row",[e("el-col",{attrs:{md:12}},[e("el-row",{attrs:{type:"flex",justify:"center"}},[e("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"warning"},on:{click:t.onBack}},[t._v("\n          < 上一步\n        ")])],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-row",{attrs:{type:"flex",justify:"center"}},[e("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.onNext}},[t._v("\n          下一步 >\n        ")])],1)],1)],1)],1)},i=[],r=(e("c5f6"),e("84d5")),o={components:{person:r["default"]},props:{primaryId:{type:[Number,String],default:null}},computed:{},data:function(){return{completed:!1,primary:{}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){var t=this;this.primaryId&&this.global.axios.get("/procurementPlans/".concat(this.primaryId)).then(function(n){var e=n.data;t.primary=e||{},t.completed=!0}).catch(function(n){t.completed=!0})},onNext:function(){this.primary&&this.primary.dataAuthories&&this.primary.dataAuthories.length>0?this.$emit("step3CBEvent",3):this.$message.error("必须选择采购负责人")},onBack:function(){this.$emit("step3CBEvent",1)},reloadCBEvent:function(){this.initData()}}},s=o,c=(e("91aa"),e("2877")),l=Object(c["a"])(s,a,i,!1,null,"14653e61",null);n["default"]=l.exports},4926:function(t,n,e){"use strict";var a=e("4a72"),i=e.n(a);i.a},"4a72":function(t,n,e){},"84d5":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"tag-group"},[t._l(t.primary.dataAuthories,function(n){return e("el-tag",{key:n.userId,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(e){return t.handleRemove(n)}}},[t._v("\n      "+t._s(n.user.name)+"\n    ")])}),t._v(" "),e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.openPersonDialog}},[t._v("+ 添加负责人")])],2),t._v(" "),e("phMembers",{ref:"members",attrs:{title:"选择采购负责人"},on:{saveCBEvent:t.saveCBEvent}})],1)},i=[],r=(e("5df3"),e("ac6a"),e("ed08"),e("d2d1")),o={components:{phMembers:r["a"]},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{loading:!1,url:"/procurementPlans",relations:["creator"],filters:[{field:"relevanceId",op:"eq",data:this.primary.id}],attachments:[]}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){},openPersonDialog:function(){this.$refs.members.openDialog()},assign:function(t){var n="".concat(this.url,"/assign/").concat(this.primary.id,"/").concat(t);return this.global.axios.put(n).then(function(t){}).catch(function(t){})},saveCBEvent:function(t){var n=this;if(t&&this.primary){var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=[];t.forEach(function(t){a.push(n.assign(t))}),Promise.all(a).then(function(t){n.$refs.members.closeDialog(),n.$message.info("操作成功!"),e.close(),n.$emit("reloadCBEvent")})}},handleRemove:function(t){var n=this;t&&t.userId&&this.$confirm("确认删除吗","提示",{type:"warning",beforeClose:function(e,a,i){if("confirm"==e){var r=n.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o="".concat(n.url,"/cancelAssign/").concat(n.primary.id,"/").concat(t.userId);n.global.axios.put(o).then(function(t){i(),n.$message.info("操作成功!"),r.close(),n.$emit("reloadCBEvent")}).catch(function(t){r.close()}),i()}else i()}}).catch(function(t){})}}},s=o,c=(e("4926"),e("2877")),l=Object(c["a"])(s,a,i,!1,null,"2e408c60",null);n["default"]=l.exports},"91aa":function(t,n,e){"use strict";var a=e("9b90"),i=e.n(a);i.a},"9b90":function(t,n,e){}}]);