(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a022"],{ba4a:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return t.dialogVisible?l("el-dialog",{attrs:{title:t.dialogTitle,"append-to-body":"",width:"80%",top:"20px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:t.rules,model:t.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[l("el-row",[l("el-col",{attrs:{md:10}},[l("el-form-item",{attrs:{label:"SKU",prop:"skuCode"}},[l("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请填写SKU",clearable:""},model:{value:t.detailItem.skuCode,callback:function(e){t.$set(t.detailItem,"skuCode","string"===typeof e?e.trim():e)},expression:"detailItem.skuCode"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"输入产品SKU编码",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:14}},[l("el-form-item",{attrs:{label:"产品名",prop:"cartonQty"}},[l("el-input",{attrs:{max:1e5,label:"产品名"},model:{value:t.detailItem.product.name,callback:function(e){t.$set(t.detailItem.product,"name",e)},expression:"detailItem.product.name"}})],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:10}},[l("el-form-item",{attrs:{label:"箱规",prop:"cartonSpecId"}},[l("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"外箱包装材料规格,可筛选"},model:{value:t.detailItem.cartonSpecCode,callback:function(e){t.$set(t.detailItem,"cartonSpecCode",e)},expression:"detailItem.cartonSpecCode"}},t._l(t.cartonspecSelectOptions,function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产品外箱包装材料规格。不输入使用产品上默认的箱规",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1),t._v(" "),l("el-col",{attrs:{md:14}},[l("el-form-item",{attrs:{label:"装箱数",prop:"numberOfCarton"}},[l("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请填写装箱数",clearable:""},model:{value:t.detailItem.numberOfCarton,callback:function(e){t.$set(t.detailItem,"numberOfCarton","string"===typeof e?e.trim():e)},expression:"detailItem.numberOfCarton"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"一箱有多少个产品.不输入使用产品上默认的装箱数",placement:"right"}},[l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:10}},[l("el-form-item",{attrs:{label:"采购数量(箱)",prop:"procurementBoxQty"}},[l("el-input",{attrs:{max:1e5,label:"采购数量(箱)"},model:{value:t.detailItem.procurementBoxQty,callback:function(e){t.$set(t.detailItem,"procurementBoxQty",e)},expression:"detailItem.procurementBoxQty"}})],1)],1),t._v(" "),l("el-col",{attrs:{md:14}},[l("el-form-item",{attrs:{label:"应发箱数",prop:"shippedCartonQty"}},[l("el-input",{attrs:{max:1e5,label:"应发箱数"},model:{value:t.detailItem.shippedCartonQty,callback:function(e){t.$set(t.detailItem,"shippedCartonQty",e)},expression:"detailItem.shippedCartonQty"}})],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:10}},[l("el-form-item",{attrs:{label:"出货件数",prop:"sevenSalesCount"}},[l("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"出货件数",clearable:""},model:{value:t.detailItem.shippedQty,callback:function(e){t.$set(t.detailItem,"shippedQty","string"===typeof e?e.trim():e)},expression:"detailItem.shippedQty"}})],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:24}},[l("el-form-item",{attrs:{label:"备注",prop:"priorityNote"}},[l("el-col",{attrs:{span:22}},[l("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80"},model:{value:t.detailItem.shippedNote,callback:function(e){t.$set(t.detailItem,"shippedNote",e)},expression:"detailItem.shippedNote"}})],1),t._v(" "),l("el-col",{attrs:{span:2}},[l("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right"}},[l("div",{attrs:{slot:"content"},slot:"content"},[t._v("按时间维度定义优先要求。格式如下：\n                "),l("HR"),t._v("\n                2018-08-16 : 5箱"),l("BR"),t._v("\n                2018-08-26 : 45件"),l("BR"),t._v("\n                2018-09-16 : 2箱"),l("BR")],1),t._v(" "),l("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1)],1),t._v(" "),l("el-row",[l("el-col",{attrs:{md:24}},[l("el-row",{attrs:{type:"flex",justify:"center"}},[l("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.onSave}},[t._v("\n            保存\n          ")])],1)],1)],1)],1)],1):t._e()},a=[],o=(l("c5f6"),l("d186")),n=l("c971"),r=l("b99d"),s={components:{},props:{primaryId:{type:Number,default:null}},computed:{dialogTitle:function(){return null==this.detailItemId?"添加采购计划明细":"修改采购计划明细"}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,url:"/procurementShippedOrderItems",relations:["product","cartonSpec"],detailItemId:null,detailItem:{},cartonspecSelectOptions:[],prioritySelectOptions:[],rules:{skuCode:[r["a"].required]}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var t=this;if(this.cartonspecSelectOptions=o["a"].getSelectOptions(),this.prioritySelectOptions=n["a"].getSelectOptions("Priority"),this.detailItemId){this.loading=!0;var e="".concat(this.url,"/").concat(this.detailItemId);this.relations&&this.relations.length>0&&(e+="?relations="+JSON.stringify(this.relations)),this.global.axios.get(e).then(function(e){var l=e.data,i=l||{};t.detailItem=i,t.detailItem.cartonSpecId=i.cartonSpecId+"",t.detailItem.priority=i.priority+"",t.loading=!1})}else this.detailItem={skuCode:"",priorityNote:"",cartonSpecId:null,priority:"2",safetyStockWeek:10,numberOfCarton:null,cartonQty:1,procurementPlanId:this.primaryId}},openDialog:function(t){this.detailItemId=t,this.dialogVisible=!0,this.initData()},onSave:function(){var t=this;this.$refs.detailItem.validate(function(e){if(!e)return!1;t.loading=!0,t.confirmLoading=!0;var l="post",i=t.url+"";!t.detailItemId&&t.detailItemId>0&&(l="put",i="".concat(t.url,"/").concat(t.detailItemId));var a=JSON.parse(JSON.stringify(t.detailItem));t.global.axios[l](i,a).then(function(e){t.$message.info("修改成功"),t.loading=!1,t.confirmLoading=!1,t.dialogVisible=!1,t.$emit("modifyCBEvent",e.data)}).catch(function(e){t.loading=!1,t.confirmLoading=!1})})}}},c=s,d=l("2877"),p=Object(d["a"])(c,i,a,!1,null,"785b0bed",null);e["default"]=p.exports}}]);