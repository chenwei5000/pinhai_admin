(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b323bc76"],{"0d03":function(e,t,i){},"71e7":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,fullscreen:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"custom-tree-container"},[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("div",{staticClass:"block",staticStyle:{height:"400px"}},[i("el-scrollbar",{staticStyle:{height:"100%"}},[i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.list,"show-checkbox":"","node-key":"id","default-expand-all":!0,"expand-on-click-node":!1,"check-on-click-node":!0,"filter-node-method":e.filterNode}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)]):e._e()},o=[],a=(i("20d6"),{props:{},data:function(){return{title:"",roleId:0,list:[],dialogVisible:!1,loading:!1,filterText:""}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{save:function(){var e=this,t=this.$refs.tree.getCheckedNodes();this.loading=!0;for(var i=[],l=0;l<t.length;l++){var o=t[l],a={};a.actionId=o.id,i.push(a)}var n="/rolePowers?roleId=".concat(this.roleId);this.global.axios.post(n,i).then(function(t){200==t.status&&e.$message.info("操作成功！"),e.loading=!1})},setDefault:function(e){var t=this,i="/rolePowers?roleId=".concat(e);this.global.axios.get(i).then(function(e){var i=[];if(200==e.status){for(var l=e.data,o=0;o<l.length;o++){var a=l[o],n=a.actionId,s={id:n};i.push(s)}t.$refs.tree.setCheckedNodes(i),t.loading=!1}})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)}},mounted:function(){var e=this;this.$on("openDiaLog",function(t,i){e.roleId=t,e.title="".concat(i," 权限管理"),e.dialogVisible=!0,e.loading=!0;var l="/actions";e.global.axios.get(l).then(function(i){var l=[{label:"权限",children:[]}];if(200==i.status){for(var o=i.data,a=function(e){var t=o[e],i=t["resource"],a=l[0].children.findIndex(function(e){return e.label==i});if(-1==a){var n={label:i,children:[{id:"".concat(t.id),label:t["title"]}]};l[0].children.push(n)}else{var s={id:"".concat(t.id),label:t["title"]};l[0].children[a].children.push(s)}},n=0;n<o.length;n++)a(n);e.list=l,e.setDefault(t)}})})}}),n=a,s=(i("8090"),i("2877")),r=Object(s["a"])(n,l,o,!1,null,"664a35b2",null);t["default"]=r.exports},8090:function(e,t,i){"use strict";var l=i("0d03"),o=i.n(l);o.a}}]);