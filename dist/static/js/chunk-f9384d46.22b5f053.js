(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9384d46"],{6039:function(e,t,i){},7819:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editObject",attrs:{rules:e.rules,model:e.editObject,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"编码",prop:"code"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:e.editObject.code,callback:function(t){e.$set(e.editObject,"code",t)},expression:"editObject.code"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"供货商",prop:"supplierId"}},[i("el-select",{staticStyle:{width:"220px"},model:{value:e.editObject.supplierId,callback:function(t){e.$set(e.editObject,"supplierId",t)},expression:"editObject.supplierId"}},e._l(e.supplierSelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"收货仓库",prop:"warehouseId"}},[i("el-select",{staticStyle:{width:"220px"},model:{value:e.editObject.warehouseId,callback:function(t){e.$set(e.editObject,"warehouseId",t)},expression:"editObject.warehouseId"}},e._l(e.warehouseSelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"预计到货时间",prop:"expectTime"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"预计到货时间"},model:{value:e.editObject.expectTime,callback:function(t){e.$set(e.editObject,"expectTime",t)},expression:"editObject.expectTime"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"物流信息",prop:"trackNumber"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":""},model:{value:e.editObject.trackNumber,callback:function(t){e.$set(e.editObject,"trackNumber",t)},expression:"editObject.trackNumber"}})],1),e._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"请根据要求填写物流信息！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":""},model:{value:e.editObject.remark,callback:function(t){e.$set(e.editObject,"remark",t)},expression:"editObject.remark"}})],1),e._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"备注信息。支持换行！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSave}},[e._v("\n          保存基本信息\n        ")])],1)],1)],1)],1)},a=[],l=(i("ac6a"),i("64dc")),s=i("8593"),o=(i("ed08"),i("a6b9")),c={components:{},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{loading:!1,confirmLoading:!1,warehouseSelectOptions:[],supplierSelectOptions:[],editObject:{id:null,code:null,warehouseId:null,supplierId:null,remark:null,trackNumber:null,expectTime:null},rules:{limitTime:[{required:!0,message:"必须输入",trigger:"blur"}],executeTime:[{required:!0,message:"必须输入",trigger:"blur"}],categoryId:[{required:!0,message:"必须输入",trigger:"blur"}],merchantId:[{required:!0,message:"必须输入",trigger:"blur"}],warehouseId:[{required:!0,message:"必须输入",trigger:"blur"}],safetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip1SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip2SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],handleMethod:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){},mounted:function(){var e=this;this.$nextTick(function(){e.initData()})},methods:{initData:function(){var e=this;if(this.loading=!0,this.primary){this.editObject=this.primary,this.editObject.limitTime=this.primary.formatLimitTime,this.editObject.executeTime=this.primary.formatExecuteTime,this.editObject.expectTime=this.primary.formatExpectTime,this.editObject.warehouseId=this.editObject.warehouseId+"",this.editObject.supplierId=this.editObject.supplierId+"",this.warehouseSelectOptions=l["a"].getSelectDomesticOptions(),this.supplierSelectOptions=o["a"].getSelectOptions(),s["a"].getConfigInfos().then(function(t){null==e.editObject.safetyStockWeek&&(e.editObject.safetyStockWeek=t.safetyStockWeek),null==e.editObject.vip1SafetyStockWeek&&(e.editObject.vip1SafetyStockWeek=t.vip1SafetyStockWeek),null==e.editObject.vip2SafetyStockWeek&&(e.editObject.vip2SafetyStockWeek=t.vip2SafetyStockWeek)});var t=!0;this.warehouseSelectOptions.forEach(function(e){"-99"==e.value&&(t=!1)}),t&&this.warehouseSelectOptions.unshift({label:"供货商库存",value:"-99"}),this.loading=!1}else this.$message.error("无效的采购计划!"),this.loading=!1},onSave:function(){var e=this;this.$confirm("注意保存基本信息只会修改对应的参数，不会重新计算明细数据，您是否继续？","提示",{type:"warning",beforeClose:function(t,i,r){"confirm"==t?(r(),e.modifyObject()):r()}}).catch(function(e){})},modifyObject:function(){var e=this,t=JSON.parse(JSON.stringify(this.editObject));t.warehouseId=t.warehouseId?t.warehouseId.join(","):"",this.loading=!0,this.confirmLoading=!0,this.global.axios.put("/procurementReceivedOrders/".concat(this.editObject.id),t).then(function(t){var i=t.data;e.$message({type:"success",message:"操作成功"}),e.loading=!1,e.confirmLoading=!1,e.formVisible=!1,e.$emit("modifyCBEvent",i)}).catch(function(t){e.loading=!1,e.confirmLoading=!1})}}},n=c,d=(i("a4d4"),i("2877")),u=Object(d["a"])(n,r,a,!1,null,"243a4c8c",null);t["default"]=u.exports},a4d4:function(e,t,i){"use strict";var r=i("6039"),a=i.n(r);a.a}}]);