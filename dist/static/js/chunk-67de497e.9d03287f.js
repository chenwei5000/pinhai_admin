(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67de497e","chunk-7d54fa6d"],{"34c2":function(t,e,n){"use strict";var i=n("6520"),a=n.n(i);a.a},"3cde":function(t,e,n){"use strict";var i=n("f7bc"),a=n.n(i);a.a},4155:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"tag-group"},[t._l(t.primary.dataAuthories,function(e){return n("el-tag",{key:e.userId,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(n){return t.handleRemove(e)}}},[t._v("\n      "+t._s(e.user.name)+"\n    ")])}),t._v(" "),n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.openPersonDialog}},[t._v("+ 添加负责人")])],2),t._v(" "),n("phMembers",{ref:"members",attrs:{title:"选择负责人"},on:{saveCBEvent:t.saveCBEvent}})],1)},a=[],r=(n("5df3"),n("ac6a"),n("ed08"),n("d2d1")),o={components:{phMembers:r["a"]},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{loading:!1,url:"/procurementOrders",relations:["creator"],filters:[{field:"relevanceId",op:"eq",data:this.primary.id}],attachments:[]}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){},openPersonDialog:function(){this.$refs.members.openDialog()},assign:function(t){var e="".concat(this.url,"/assign/").concat(this.primary.id,"/").concat(t);return this.global.axios.put(e).then(function(t){}).catch(function(t){})},saveCBEvent:function(t){var e=this;if(t&&this.primary){var n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=[];t.forEach(function(t){i.push(e.assign(t))}),Promise.all(i).then(function(t){e.$refs.members.closeDialog(),e.$message.info("操作成功!"),n.close(),e.$emit("reloadCBEvent")})}},handleRemove:function(t){var e=this;t&&t.userId&&this.$confirm("确认删除吗","提示",{type:"warning",beforeClose:function(n,i,a){if("confirm"==n){var r=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o="".concat(e.url,"/cancelAssign/").concat(e.primary.id,"/").concat(t.userId);e.global.axios.put(o).then(function(t){a(),e.$message.info("操作成功!"),r.close(),e.$emit("reloadCBEvent")}).catch(function(t){r.close()}),a()}else a()}}).catch(function(t){})}}},s=o,c=(n("3cde"),n("2877")),l=Object(c["a"])(s,i,a,!1,null,"2608c800",null);e["default"]=l.exports},6520:function(t,e,n){},e1e7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("aside",{staticStyle:{"font-size":"12px"}},[t._v("\n    为了保证本采购单的顺利执行，需要指派对应的跟单、仓管负责人，可多选。指派的负责人将会收到对应的邮件和系统消息提醒。\n  ")]),t._v(" "),n("h5",[t._v("负责人：")]),t._v(" "),t.completed?n("person",{ref:"person",attrs:{primary:t.primary},on:{reloadCBEvent:t.reloadCBEvent}}):t._e(),t._v(" "),n("el-row",[n("el-col",{attrs:{md:24}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.onNext}},[t._v("\n          下一步 >\n        ")])],1)],1)],1)],1)},a=[],r=(n("c5f6"),n("4155")),o={components:{person:r["default"]},props:{primaryId:{type:[Number,String],default:null}},computed:{},data:function(){return{completed:!1,primary:{}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){var t=this;this.primaryId&&this.global.axios.get("/procurementOrders/".concat(this.primaryId)).then(function(e){var n=e.data;t.primary=n||{},t.completed=!0}).catch(function(e){t.completed=!0})},onNext:function(){this.primary&&this.primary.dataAuthories&&this.primary.dataAuthories.length>0?this.$emit("step2CBEvent",3):this.$message.error("必须选择至少一位负责人")},reloadCBEvent:function(){this.initData()}}},s=o,c=(n("34c2"),n("2877")),l=Object(c["a"])(s,i,a,!1,null,"2300cf8f",null);e["default"]=l.exports},f7bc:function(t,e,n){}}]);