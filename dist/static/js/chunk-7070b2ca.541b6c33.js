(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7070b2ca"],{1311:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editObject",attrs:{rules:e.rules,model:e.editObject,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"销售渠道",prop:"merchantId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择销售渠道"},model:{value:e.editObject.merchantId,callback:function(t){e.$set(e.editObject,"merchantId",t)},expression:"editObject.merchantId"}},e._l(e.merchantSelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"以选定的销售渠道（销售店铺）的销售情况为备货依据。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"标签",prop:"tags"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"20","show-word-limit":"",placeholder:"请填写标签",clearable:""},model:{value:e.editObject.tags,callback:function(t){e.$set(e.editObject,"tags",t)},expression:"editObject.tags"}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"给计划打上一个标签方便查找",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",multiple:"",placeholder:"请选择分类,可多选"},model:{value:e.editObject.categoryId,callback:function(t){e.$set(e.editObject,"categoryId",t)},expression:"editObject.categoryId"}},e._l(e.categorySelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"选择需要备货的分类",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"国内库存",prop:"warehouseId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",multiple:"",placeholder:"请选择库存,可多选"},model:{value:e.editObject.warehouseId,callback:function(t){e.$set(e.editObject,"warehouseId",t)},expression:"editObject.warehouseId"}},e._l(e.warehouseSelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"以选定的仓库库存情况为当前库存依据。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"下单截止日",prop:"limitTime"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"下单截止日"},model:{value:e.editObject.limitTime,callback:function(t){e.$set(e.editObject,"limitTime",t)},expression:"editObject.limitTime"}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"本次采购必须在这个日期之前完成交货",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"交货截止日",prop:"executeTime"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"交货截止日"},model:{value:e.editObject.executeTime,callback:function(t){e.$set(e.editObject,"executeTime",t)},expression:"editObject.executeTime"}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"本次采购必须在这个日期之前向厂家签好采购合同",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"非Vip备货周数",prop:"safetyStockWeek"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择非Vip备货周数"},model:{value:e.editObject.safetyStockWeek,callback:function(t){e.$set(e.editObject,"safetyStockWeek",t)},expression:"editObject.safetyStockWeek"}},e._l(52,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"普通类型的产品，希望支持销售的周数。可在产品管理中查看产品类型。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"Vip1备货周数",prop:"vip1SafetyStockWeek"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择Vip1备货周数"},model:{value:e.editObject.vip1SafetyStockWeek,callback:function(t){e.$set(e.editObject,"vip1SafetyStockWeek",t)},expression:"editObject.vip1SafetyStockWeek"}},e._l(52,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"热卖类型的产品，希望支持销售的周数。可在产品管理中查看产品类型。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"Vip2备货周数",prop:"vip2SafetyStockWeek"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择Vip2备货周数"},model:{value:e.editObject.vip2SafetyStockWeek,callback:function(t){e.$set(e.editObject,"vip2SafetyStockWeek",t)},expression:"editObject.vip2SafetyStockWeek"}},e._l(52,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"爆款类型的产品，希望支持销售的周数。可在产品管理中查看产品类型。",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"未完成采购计划处理方式",prop:"handleMethod"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择未完成采购计划处理方式"},model:{value:e.editObject.handleMethod,callback:function(t){e.$set(e.editObject,"handleMethod",t)},expression:"editObject.handleMethod"}},[i("el-option",{attrs:{label:"不考虑",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"采购计划数量",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"已下采购单数量",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"已发货数量",value:"3"}}),e._v(" "),i("el-option",{attrs:{label:"已收货数量",value:"4"}})],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("对当前没有结束的其它采购计划的处理方式。"),i("BR"),e._v("\n            例如：选择已发货数量。表示最终需要减去没有完成采购计划中，已经发货的数量。"),i("BR"),e._v("\n            具体各种状态数量可以在采购计划中查看。\n          ")],1),e._v(" "),i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"备注",prop:"note"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":""},model:{value:e.editObject.note,callback:function(t){e.$set(e.editObject,"note",t)},expression:"editObject.note"}})],1),e._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"备注信息。支持换行！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[e.hasEdit?i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSave}},[e._v("\n          保存基本信息\n        ")]):e._e()],1)],1)],1)],1)},a=[],o=(i("ac6a"),i("28a5"),i("c405")),s=i("64dc"),c=i("8492"),r=i("8593"),n=i("ed08"),d={components:{},props:{primary:{type:[Object],default:{}}},computed:{hasEdit:function(){return!([0,8].indexOf(this.primary.status)>-1)}},data:function(){return{loading:!1,confirmLoading:!1,categorySelectOptions:[],warehouseSelectOptions:[],merchantSelectOptions:[],editObject:{id:null,categoryId:null,limitTime:null,executeTime:null,tags:null,note:null,merchantId:null,warehouseId:null,handleMethod:"3",safetyStockWeek:null,vip1SafetyStockWeek:null,vip2SafetyStockWeek:null},rules:{limitTime:[{required:!0,message:"必须输入",trigger:"blur"}],executeTime:[{required:!0,message:"必须输入",trigger:"blur"}],categoryId:[{required:!0,message:"必须输入",trigger:"blur"}],merchantId:[{required:!0,message:"必须输入",trigger:"blur"}],warehouseId:[{required:!0,message:"必须输入",trigger:"blur"}],safetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip1SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip2SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],handleMethod:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){},mounted:function(){var e=this;this.$nextTick(function(){e.initData()})},methods:{initData:function(){var e=this;if(this.loading=!0,this.primary){this.editObject=this.primary,this.editObject.limitTime=this.primary.formatLimitTime,this.editObject.executeTime=this.primary.formatExecuteTime,this.editObject.categoryId=Object(n["f"])(this.primary.categoryId),this.editObject.warehouseId=this.primary.warehouseId?Object(n["f"])(this.primary.warehouseId.split(",")):[],this.editObject.handleMethod=this.primary.handleMethod+"",this.categorySelectOptions=o["a"].getMineSelectOptions(),this.merchantSelectOptions=c["a"].getSelectOptions(),this.warehouseSelectOptions=s["a"].getSelectDomesticOptions(),r["a"].getConfigInfos().then(function(t){null==e.editObject.safetyStockWeek&&(e.editObject.safetyStockWeek=t.safetyStockWeek),null==e.editObject.vip1SafetyStockWeek&&(e.editObject.vip1SafetyStockWeek=t.vip1SafetyStockWeek),null==e.editObject.vip2SafetyStockWeek&&(e.editObject.vip2SafetyStockWeek=t.vip2SafetyStockWeek)});var t=!0;this.warehouseSelectOptions.forEach(function(e){"-99"==e.value&&(t=!1)}),t&&this.warehouseSelectOptions.unshift({label:"供货商库存",value:"-99"}),this.loading=!1}else this.$message.error("无效的采购计划!"),this.loading=!1},onSave:function(){var e=this;this.$confirm("注意保存基本信息只会修改对应的参数，不会重新计算明细数据，您是否继续？","提示",{type:"warning",beforeClose:function(t,i,l){"confirm"==t?(l(),e.modifyObject()):l()}}).catch(function(e){})},modifyObject:function(){var e=this,t=JSON.parse(JSON.stringify(this.editObject));t.warehouseId=t.warehouseId?t.warehouseId.join(","):"",this.loading=!0,this.confirmLoading=!0,this.global.axios.put("/procurementPlans/".concat(this.editObject.id),t).then(function(t){var i=t.data;e.$message({type:"success",message:"操作成功"}),e.loading=!1,e.confirmLoading=!1,e.formVisible=!1,e.$emit("modifyCBEvent",i)}).catch(function(t){e.loading=!1,e.confirmLoading=!1})}}},p=d,u=(i("4d39"),i("2877")),m=Object(u["a"])(p,l,a,!1,null,"52fff042",null);t["default"]=m.exports},"4d39":function(e,t,i){"use strict";var l=i("727f"),a=i.n(l);a.a},"727f":function(e,t,i){}}]);