(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67fdee48","chunk-4ec00e14","chunk-29d65439","chunk-d1d55658","chunk-428c57c7","chunk-2d22cc88"],{"0034":function(t,e,i){"use strict";var a=i("120c"),r=i.n(a);r.a},"120c":function(t,e,i){},1767:function(t,e,i){},"223e":function(t,e,i){"use strict";var a=i("a5c1"),r=i.n(a);r.a},"26d3":function(t,e,i){"use strict";var a=i("1767"),r=i.n(a);r.a},"54ae":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.uploadUrl,"on-preview":t.handlePreview,"before-remove":t.beforeRemove,"on-success":t.handleSuccess,multiple:"","file-list":t.attachments}},[i("el-button",{staticClass:"button-new-tag"},[t._v("+ 添加附件")])],1)],1)},r=[],o=(i("7f7f"),i("ac6a"),i("ed08"),{components:{},props:{primary:{type:[Object],default:{}}},computed:{uploadUrl:function(){return"".concat(this.global.generateUrl(this.url),"/uploadFiles/").concat(this.primary.id,"?accessToken=").concat(this.$store.state.user.token)}},data:function(){return{url:"/attachments/procurementShippedOrder",relations:["creator"],filters:[{field:"relevanceId",op:"eq",data:this.primary.id}],attachments:[]}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){var t=this;if(this.primary){var e=this.url;this.filters&&this.filters.length>0&&(e+="?filters="+JSON.stringify({groupOp:"AND",rules:this.filters})),this.relations&&this.relations.length>0&&(e+="&relations="+JSON.stringify(this.relations)),this.global.axios.get(e).then(function(e){var i=e.data,a=i||[];t.attachments=[],a.forEach(function(e){t.attachments.push({id:e.id,name:e.fileName,url:"".concat(t.global.generateUrl(t.url),"/view/").concat(e.id,"?accessToken=").concat(t.$store.state.user.token)})})}).catch(function(t){})}},remove:function(t){var e=this;if(this.primary){var i="".concat(this.global.generateUrl(this.url),"/").concat(t.id,"?accessToken=").concat(this.$store.state.user.token);this.global.axios.delete(i).then(function(t){e.$message.info("附件删除成功!")}).catch(function(t){})}},handleSuccess:function(){this.initData()},handlePreview:function(t){window.open(t.url,"_blank")},beforeRemove:function(t,e){var i=this;return this.$confirm("确定移除 ".concat(t.name,"？"),"提示",{beforeClose:function(e,a,r){"confirm"==e?(i.remove(t),r(!0)):r(!1)}})}}}),l=o,n=(i("0034"),i("2877")),s=Object(n["a"])(l,a,r,!1,null,"b615b760",null);e["default"]=s.exports},5596:function(t,e,i){},"5c75":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dialogVisible?i("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,fullscreen:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-row",{staticStyle:{"margin-bottom":"20px"}},[t.hasExecute?i("el-button",{attrs:{type:"success",icon:"el-icon-s-flag"},on:{click:t.onConfirm}},[t._v("一键确认")]):t._e(),t._v(" "),t.hasExecute?i("el-button",{attrs:{type:"success",icon:"el-icon-s-claim"},on:{click:t.onComplete}},[t._v("收货完成")]):t._e()],1),t._v(" "),i("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("el-collapse-item",{attrs:{name:"infoFrom"}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("1. 基本信息")]),t._v(" "),i("infoFrom",{ref:"infoFrom",attrs:{primary:t.primary},on:{modifyCBEvent:t.modifyCBEvent}})],1),t._v(" "),i("el-collapse-item",{staticStyle:{"margin-top":"10px"},attrs:{name:"itemTable"}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("2. 确认收货")]),t._v(" "),i("itemTable",{ref:"itemTable",attrs:{primary:t.primary}})],1),t._v(" "),i("el-collapse-item",{staticStyle:{"margin-top":"10px"},attrs:{name:"attachment"}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("3. 附件")]),t._v(" "),i("attachment",{ref:"attachment",attrs:{primary:t.primary}})],1)],1)],1):t._e()},r=[],o=i("7819"),l=i("b76e"),n=i("54ae"),s=i("7556"),c={components:{infoFrom:o["default"],itemTable:l["default"],attachment:n["default"],person:s["default"]},props:{},computed:{hasExecute:function(){return[2,3,4,5,6,7].indexOf(this.primary.status)>-1},title:function(){return"编辑采购计划 -- ("+this.primary.statusName+"状态)"}},data:function(){return{primaryId:null,primary:{},dialogVisible:!1,activeNames:[],url:"/procurementReceivedOrders/confirmTask"}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var t=this;this.primaryId&&this.global.axios.get("/procurementReceivedOrders/".concat(this.primaryId)).then(function(e){var i=e.data;t.primary=i||{},t.dialogVisible=!0}).catch(function(t){})},openDialog:function(t){this.primaryId=t,this.initData()},modifyCBEvent:function(t){this.$emit("modifyCBEvent",t)},onConfirm:function(){var t=this;this.global.axios.put("/procurementReceivedOrders/confirmTask/".concat(this.primaryId)).then(function(e){t.loading=!1,t.confirmLoading=!1,t.dialogVisible=!1,t.$message.info("确认收货成功")}).catch(function(e){t.loading=!1,t.confirmLoading=!1})},onComplete:function(){var t=this;this.global.axios.put("/procurementReceivedOrders/receivedTask/".concat(this.primaryId)).then(function(e){t.$message.info("收货完成"),t.initData()}).catch(function(e){t.loading=!1,t.confirmLoading=!1})}}},d=c,u=(i("9132"),i("2877")),m=Object(u["a"])(d,a,r,!1,null,"db6179c4",null);e["default"]=m.exports},7556:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tag-group"},[t._l(t.primary.dataAuthories,function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleRemove(e)}}},[t._v("\n      "+t._s(e.user.name)+"\n    ")])}),t._v(" "),i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.openPersonDialog}},[t._v("+ 添加负责人")])],2)])},r=[],o=(i("ed08"),{components:{},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{url:"/attachments/procurementPlan",relations:["creator"],filters:[{field:"relevanceId",op:"eq",data:this.primary.id}],attachments:[]}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){},openPersonDialog:function(){},handleRemove:function(){this.initData()}}}),l=o,n=(i("d45e"),i("2877")),s=Object(n["a"])(l,a,r,!1,null,"008c78ee",null);e["default"]=s.exports},7819:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"editObject",attrs:{rules:t.rules,model:t.editObject,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"编码",prop:"code"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.editObject.code,callback:function(e){t.$set(t.editObject,"code",e)},expression:"editObject.code"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"供货商",prop:"supplierId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.editObject.supplierId,callback:function(e){t.$set(t.editObject,"supplierId",e)},expression:"editObject.supplierId"}},t._l(t.supplierSelectOptions,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"收货仓库",prop:"warehouseId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.editObject.warehouseId,callback:function(e){t.$set(t.editObject,"warehouseId",e)},expression:"editObject.warehouseId"}},t._l(t.warehouseSelectOptions,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"预计到货时间",prop:"expectTime"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",disabled:!0,placeholder:"预计到货时间"},model:{value:t.editObject.expectTime,callback:function(e){t.$set(t.editObject,"expectTime",e)},expression:"editObject.expectTime"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"物流信息",prop:"trackNumber"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":"",disabled:!0},model:{value:t.editObject.trackNumber,callback:function(e){t.$set(t.editObject,"trackNumber",e)},expression:"editObject.trackNumber"}})],1),t._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"请根据要求填写物流信息！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80",disabled:!0,"show-word-limit":""},model:{value:t.editObject.remark,callback:function(e){t.$set(t.editObject,"remark",e)},expression:"editObject.remark"}})],1),t._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"备注信息。支持换行！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[t._v(" ")])])],1)],1)],1)],1)],1)},r=[],o=(i("ac6a"),i("64dc")),l=i("8593"),n=(i("ed08"),i("a6b9")),s={components:{},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{loading:!1,confirmLoading:!1,warehouseSelectOptions:[],supplierSelectOptions:[],editObject:{id:null,code:null,warehouseId:null,supplierId:null,remark:null,trackNumber:null,expectTime:null},rules:{limitTime:[{required:!0,message:"必须输入",trigger:"blur"}],executeTime:[{required:!0,message:"必须输入",trigger:"blur"}],categoryId:[{required:!0,message:"必须输入",trigger:"blur"}],merchantId:[{required:!0,message:"必须输入",trigger:"blur"}],warehouseId:[{required:!0,message:"必须输入",trigger:"blur"}],safetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip1SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],vip2SafetyStockWeek:[{required:!0,message:"必须输入",trigger:"blur"}],handleMethod:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},methods:{initData:function(){var t=this;if(this.loading=!0,this.primary){this.editObject=this.primary,this.editObject.limitTime=this.primary.formatLimitTime,this.editObject.executeTime=this.primary.formatExecuteTime,this.editObject.expectTime=this.primary.formatExpectTime,this.editObject.warehouseId=this.editObject.warehouseId+"",this.editObject.supplierId=this.editObject.supplierId+"",this.warehouseSelectOptions=o["a"].getSelectDomesticOptions(),this.supplierSelectOptions=n["a"].getSelectOptions(),l["a"].getConfigInfos().then(function(e){null==t.editObject.safetyStockWeek&&(t.editObject.safetyStockWeek=e.safetyStockWeek),null==t.editObject.vip1SafetyStockWeek&&(t.editObject.vip1SafetyStockWeek=e.vip1SafetyStockWeek),null==t.editObject.vip2SafetyStockWeek&&(t.editObject.vip2SafetyStockWeek=e.vip2SafetyStockWeek)});var e=!0;this.warehouseSelectOptions.forEach(function(t){"-99"==t.value&&(e=!1)}),e&&this.warehouseSelectOptions.unshift({label:"供货商库存",value:"-99"}),this.loading=!1}else this.$message.error("无效的采购计划!"),this.loading=!1},modifyObject:function(){var t=this,e=JSON.parse(JSON.stringify(this.editObject));this.loading=!0,this.confirmLoading=!0,this.global.axios.put("/procurementReceivedOrders/".concat(this.editObject.id),e).then(function(e){var i=e.data;t.$message({type:"success",message:"操作成功"}),t.loading=!1,t.confirmLoading=!1,t.formVisible=!1,t.$emit("modifyCBEvent",i)}).catch(function(e){t.loading=!1,t.confirmLoading=!1})}}},c=s,d=(i("26d3"),i("2877")),u=Object(d["a"])(c,a,r,!1,null,"7e358f16",null);e["default"]=u.exports},9132:function(t,e,i){"use strict";var a=i("e9cc"),r=i.n(a);r.a},a5c1:function(t,e,i){},b76e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ph-table"},[i("el-form",{ref:"searchForm",attrs:{inline:!0,model:t.searchParam,id:"filter-form"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"SKU"}},[i("el-input",{attrs:{placeholder:"请输入SKU",clearable:""},model:{value:t.searchParam.skuCode,callback:function(e){t.$set(t.searchParam,"skuCode",e)},expression:"searchParam.skuCode"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{"native-type":"submit",type:"primary",size:"small"},on:{click:t.search}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.resetSearch}},[t._v("重置")])],1)],1),t._v(" "),i("tableToolBar",t._b({on:{onToolBarAdd:t.onToolBarAdd,onToolBarEdit:t.onToolBarEdit,onToolBarDelete:t.onToolBarDelete,onToolBarDownloadTpl:t.onToolBarDownloadTpl,onToolBarDownloadData:t.onToolBarDownloadData,onToolBarImportData:t.onToolBarImportData}},"tableToolBar",t.toolbarConfig,!1)),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",border:"","highlight-current-row":"","max-height":t.tableMaxHeight,"row-class-name":t.dangerClassName,"cell-class-name":"ph-cell","header-cell-class-name":"ph-cell-header",data:t.tableData,"show-summary":"","summary-method":t.getSummaries,"default-sort":{prop:"product.skuCode",order:"ascending"},id:"table"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{prop:"sortNum",label:"序号",sortable:"",width:"200",fixed:"left"}}),t._v(" "),i("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:0===e.row.status?"warning":3===e.row.status?"primary":6===e.row.status?"info":"success","disable-transitions":""}},[t._v(t._s(e.row.statusName)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"skuCode",label:"SKU编码",width:"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"product.name",label:"产品名",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"boxCode",label:"箱码",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shippedCartonQty",label:"发货数量(箱)",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"storageLocation.code",label:"存放货位",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shippedQty",label:"总发货件数",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedQty",label:"收货数量",width:"90"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedNote",sortable:"",label:"异常备注",width:"130"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedCartonQty",sortable:"",label:"合计箱数",width:"120"}}),t._v(" "),t.hasOperation?i("el-table-column",{attrs:{label:"操作","no-export":"true",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasEdit?i("el-button",{attrs:{size:"small",icon:"el-icon-edit",circle:"",type:"primary",id:"ph-table-edit"},on:{click:function(i){return t.onDefaultEdit(e.row)}}}):t._e()]}}],null,!1,2159769287)}):t._e()],1),t._v(" "),i("itemDialog",{ref:"itemDialog",attrs:{primaryId:t.primary.id},on:{modifyCBEvent:t.modifyCBEvent}})],1)},r=[],o=(i("7f7f"),i("386d"),i("c5f6"),i("ac6a"),i("cebc")),l=i("2f62"),n=i("ed08"),s=i("a4af"),c=i("c971"),d=i("f569"),u={components:{tableToolBar:s["a"],itemDialog:d["default"]},props:{primary:{type:[Object],default:null}},computed:Object(o["a"])({},Object(l["b"])(["device","rolePower"])),filters:{currency:n["b"]},data:function(){return{statusSelectOptions:[],tableMaxHeight:"mobile"!==this.device?500:4e7,confirmLoading:!1,hasOperation:!0,hasAdd:!1,hasEdit:!0,hasDelete:!1,selected:[],url:"/procurementReceivedOrderItems",downloadUrl:"",searchParam:{skuCode:null},filters:[{field:"procurementShippedOrderId",op:"eq",data:this.primary?this.primary.id:-1}],relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],data:[],tableData:[],loading:!1,row:{},toolbarConfig:{hasEdit:!0,hasDelete:!1,hasAdd:!1,hasExportTpl:!1,hasExport:!1,hasImport:!1}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData(),t.getList()})},methods:{initData:function(){this.loading=!0,this.statusSelectOptions=c["a"].getSelectOptions("ProcurementShippedOrderStatus"),this.downloadUrl=this.url,this.filters&&this.filters.length>0&&(this.downloadUrl+="?filters="+JSON.stringify({groupOp:"AND",rules:this.filters})),this.relations&&this.relations.length>0&&(this.downloadUrl+="&relations="+JSON.stringify(this.relations))},dangerClassName:function(t){t.row},getSummaries:function(t){var e=t.columns,i=t.data,a=[];return e.forEach(function(t,e){if("product.skuCode"==t.property){var r=i.map(function(e){return e[t.property]});a[e]=r.reduce(function(t){return t+1},0),a[e]="合计: "+a[e]+" 行"}if("cartonQty"==t.property){var o=i.map(function(e){return Number(e[t.property])});o.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=o.reduce(function(t,e){var i=Number(e);return isNaN(i)?t:t+e},0),a[e]+=" 箱")}if("amount"==t.property){var l=i.map(function(e){return Number(e[t.property])});l.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=l.reduce(function(t,e){var i=Number(e);return isNaN(i)?t:t+e},0),a[e]=Object(n["b"])(a[e]))}}),a},getList:function(){var t=this,e=this.url,i="";e?(this.filters&&this.filters.length>0&&(i+="?filters="+JSON.stringify({groupOp:"AND",rules:this.filters})),this.relations&&this.relations.length>0&&(i+="&relations="+JSON.stringify(this.relations)),this.loading=!0,this.global.axios.get(e+i).then(function(e){var i=e.data,a=i||[];t.data=a,t.search(),t.total=i.length||0,t.loading=!1,t.$emit("update",a,i)}).catch(function(e){t.$emit("error",e),t.loading=!1})):console.warn("url 为空, 不发送请求")},handleSelectionChange:function(t){this.selected=t},search:function(){var t=this;this.tableData=this.data,null!=this.searchParam.category&&""!=this.searchParam.category&&(this.tableData=this.tableData.filter(function(e){if(e.product&&e.product.category&&-1!==e.product.category.name.indexOf(t.searchParam.category))return!0})),null!=this.searchParam.skuCode&&""!=this.searchParam.skuCode&&(this.tableData=this.tableData.filter(function(e){if(e.product&&-1!==e.product.skuCode.indexOf(t.searchParam.skuCode))return!0})),null!=this.searchParam.status&&""!=this.searchParam.status&&(this.tableData=this.tableData.filter(function(e){if(e.status==t.searchParam.status)return!0})),null!=this.searchParam.priority&&""!=this.searchParam.priority&&(this.tableData=this.tableData.filter(function(e){if(e.priority==t.searchParam.priority)return!0}))},resetSearch:function(){this.$refs.searchForm.resetFields(),this.searchParam.skuCode=null,this.search()},onDefaultEdit:function(t){this.$refs.itemDialog.openDialog(t.id)},onDefaultDelete:function(t){var e=this;this.$confirm("确认删除吗","提示",{type:"warning",beforeClose:function(t,i,a){"confirm"==t?(e.getList(),a()):a()}}).catch(function(t){})},modifyCBEvent:function(t){this.getList()},onToolBarAdd:function(){this.$refs.itemDialog.openDialog(null)},onToolBarEdit:function(){},onToolBarDelete:function(){},onToolBarDownloadTpl:function(){var t=this.$refs.table,e=this.downloadUrl;Promise.all([i.e("chunk-d2907d8a"),i.e("chunk-748b566e")]).then(i.bind(null,"4bf8d")).then(function(i){i.export_el_table_to_excel({table:t,downloadUrl:e,filename:"采购计划内容-模版",noExportProps:["操作","金额","ID","下单件数","发货件数","收货件数"],tpl:!0})})},onToolBarDownloadData:function(){var t=this,e=this.$refs.table,a=this.downloadUrl;Promise.all([i.e("chunk-d2907d8a"),i.e("chunk-748b566e")]).then(i.bind(null,"4bf8d")).then(function(i){t.loading=!0,i.export_el_table_to_excel({table:e,downloadUrl:a,filename:"采购计划内容",noExportProps:["操作","金额","ID"]}),t.loading=!1})},onToolBarImportData:function(){}}},m=u,p=(i("223e"),i("2877")),f=Object(p["a"])(m,a,r,!1,null,"2fa973e4",null);e["default"]=f.exports},d45e:function(t,e,i){"use strict";var a=i("5596"),r=i.n(a);r.a},e9cc:function(t,e,i){},f569:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dialogVisible?i("el-dialog",{attrs:{title:t.dialogTitle,"append-to-body":"",width:"80%",top:"20px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:t.rules,model:t.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"序号",prop:"sortNum"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.sortNum,callback:function(e){t.$set(t.detailItem,"sortNum",e)},expression:"detailItem.sortNum"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"SKU编码",prop:"skuCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.skuCode,callback:function(e){t.$set(t.detailItem,"skuCode",e)},expression:"detailItem.skuCode"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"箱码",prop:"boxCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.boxCode,callback:function(e){t.$set(t.detailItem,"boxCode",e)},expression:"detailItem.boxCode"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"产品名",prop:"productId"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.productId,callback:function(e){t.$set(t.detailItem,"productId",e)},expression:"detailItem.productId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"发货数量(箱)",prop:"shippedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedCartonQty,callback:function(e){t.$set(t.detailItem,"shippedCartonQty",e)},expression:"detailItem.shippedCartonQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"存放货位",prop:"storageLocationId"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.storageLocationId,callback:function(e){t.$set(t.detailItem,"storageLocationId",e)},expression:"detailItem.storageLocationId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"总发货件数",prop:"shippedQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedQty,callback:function(e){t.$set(t.detailItem,"shippedQty",e)},expression:"detailItem.shippedQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"收货数量",prop:"receivedQty"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:t.detailItem.receivedQty,callback:function(e){t.$set(t.detailItem,"receivedQty",e)},expression:"detailItem.receivedQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"异常备注",prop:"receivedNote"}},[i("el-input",{staticStyle:{width:"220px"},model:{value:t.detailItem.receivedNote,callback:function(e){t.$set(t.detailItem,"receivedNote",e)},expression:"detailItem.receivedNote"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"合计箱数",prop:"receivedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.receivedCartonQty,callback:function(e){t.$set(t.detailItem,"receivedCartonQty",e)},expression:"detailItem.receivedCartonQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.onSave}},[t._v("\n            保存\n          ")])],1)],1)],1)],1)],1):t._e()},r=[],o=(i("c5f6"),{components:{},props:{primaryId:{type:Number,default:null}},computed:{dialogTitle:function(){return null==this.detailItemId?"添加采购入库明细":"修改采购入库明细"}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,url:"/procurementReceivedOrderItems",relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],detailItemId:null,detailItem:{sortNum:null,skuCode:null,boxCode:null,shippedCartonQty:null,storageLocationId:null,shippedQty:null,receivedQty:null,receivedNote:null,receivedCartonQty:null,productId:null},rules:{}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var t=this;if(this.detailItemId){this.loading=!0;var e="".concat(this.url,"/").concat(this.detailItemId);this.relations&&this.relations.length>0&&(e+="?relations="+JSON.stringify(this.relations)),this.global.axios.get(e).then(function(e){var i=e.data,a=i||{};t.detailItem=a,t.detailItem.storageLocationId=t.detailItem.storageLocationId+"",t.detailItem.productId=t.detailItem.productId+"",t.loading=!1})}},openDialog:function(t){this.detailItemId=t,this.dialogVisible=!0,this.initData()},onSave:function(){var t=this;this.$refs.detailItem.validate(function(e){if(!e)return!1;t.loading=!0,t.confirmLoading=!0;var i="post",a=t.url+"";t.detailItemId&&t.detailItemId>0&&(i="put",a="".concat(t.url,"/").concat(t.detailItemId));var r=JSON.parse(JSON.stringify(t.detailItem));t.global.axios[i](a,r).then(function(e){t.$message.info("修改成功"),t.loading=!1,t.confirmLoading=!1,t.dialogVisible=!1,t.$emit("modifyCBEvent",e.data)}).catch(function(e){t.loading=!1,t.confirmLoading=!1})})}}}),l=o,n=i("2877"),s=Object(n["a"])(l,a,r,!1,null,"2016f3ed",null);e["default"]=s.exports}}]);