(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-733d1010","chunk-4e329fbb"],{"01ec":function(e,t,a){},"1f0c":function(e,t,a){"use strict";var r=a("01ec"),o=a.n(r);o.a},3387:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ph-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",border:"","highlight-current-row":"","row-class-name":e.dangerClassName,"cell-class-name":"ph-cell","header-cell-class-name":"ph-cell-header",data:e.data,"max-height":e.tableMaxHeight,id:"table"},on:{"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100",fixed:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"skuCode",label:"SKU编码",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product.name",label:"产品名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"priorityName",label:"优先级",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cartonSpecName",label:"箱规",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qty",label:"采购件数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"numberOfCarton",label:"采购箱数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wu",label:"销售要求",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"采购价",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"总金额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shippedQty",label:"发货数量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivedQty",label:"收货数量",width:"100"}})],1),e._v(" "),a("el-pagination",{ref:"pageForm",staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes,"page-size":e.size,total:e.total,background:"",layout:e.layout,id:"ph-table-page"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-button",{staticClass:"btn-prev",attrs:{icon:"el-icon-refresh",circle:""},on:{click:e.onRefreshTable}})],1)],1)},o=[],n=(a("a481"),a("7f7f"),a("6b54"),a("456d"),a("ac6a"),a("cebc")),l=(a("3b2b"),a("2f62")),i=(a("4328"),a("1c46"),"~"),s=(new RegExp(i,"g"),","),c=new RegExp("q=.*"+s),u={components:{},props:{},computed:Object(n["a"])({},Object(l["b"])(["device"]),{phTableAttrs:function(){return Object.assign(this.defaultTableAttrs,this.tableAttrs)}}),data:function(){return{tableMaxHeight:"mobile"!==this.device?400:4e7,hasOperation:!0,hasEdit:!0,hasDelete:!0,hasSetting:!0,selected:[],size:20,page:1,layout:"total, sizes, slot, prev, pager, next, jumper",paginationSizes:[20,50,100],total:0,url:"/procurementOrderItems",relations:["product","currency","cartonSpec","procurementOrder","procurementPlanItem","product.supplier"],data:[],phSort:{prop:"id",order:"asc"},loading:!1,searchParam:{procurementOrderId:{value:"511",op:"eq",id:"procurementOrderId"},name:{value:null,op:"bw",id:"name"},status:{value:null,op:"eq",id:"status"}},dialogTitle:"新增",dialogVisible:!1,isNew:!0,isEdit:!1,isView:!1,confirmLoading:!1,row:{}}},created:function(){},mounted:function(){var e=this;window.onresize=function(){e.getTableHeight()},this.getList(),this.$nextTick(function(){e.getTableHeight(),e.getList()})},methods:{getTableHeight:function(){this.tableMaxHeight=500},getList:function(e){var t=this,a=this.url,r="",o=this.size,n=this.page;if(a){a.indexOf("?")>-1?a+="&":a+="?",r+="pageSize=".concat(o,"&currentPage=").concat(n),this.phSort&&(r+="&sort=".concat(this.phSort.prop,"&dir=").concat(this.phSort.order));var l=[];Object.keys(this.searchParam).filter(function(e){return t.searchParam[e]&&""!==t.searchParam[e].value&&null!==t.searchParam[e].value&&void 0!==t.searchParam[e].value}).forEach(function(e){l.push({field:e,op:t.searchParam[e].op?t.searchParam[e].op:"eq",data:t.searchParam[e].value?encodeURIComponent(t.searchParam[e].value.toString().trim()):""})}),l&&l.length>0&&(r+="&filters="+JSON.stringify({groupOp:"AND",rules:l})),this.relations&&this.relations.length>0&&(r+="&relations="+JSON.stringify(this.relations)),this.loading=!0,this.global.axios.get(a+r).then(function(e){var a=e.data,r=a||[];t.data=r,t.total=r.length||0,t.loading=!1,t.$emit("update",r,a)}).catch(function(e){t.$emit("error",e),t.loading=!1})}else console.warn("url 为空, 不发送请求")},search:function(){var e=this;this.$refs.searchForm.validate(function(t){t&&(e.page=1,e.getList(!0))})},resetSearch:function(){var e=this;this.$refs.searchForm.resetFields(),this.searchParam.name.value=null,this.searchParam.status.value=null,this.page=1,history.replaceState(history.state,"",location.href.replace(c,"")),this.$nextTick(function(){e.getList()})},dangerClassName:function(e){e.row;return""},handleSizeChange:function(e){this.size!==e&&(this.page=1,this.size=e,this.getList(!0))},handleCurrentChange:function(e){this.page!==e&&(this.page=e,this.getList(!0))},handleSelectionChange:function(e){this.selected=e,this.$emit("selection-change",e)},handleSortChange:function(e){e.prop&&(this.phSort.prop=e.prop,this.phSort.order="ascending"===e.order?"asc":"desc"),this.page=1,this.getList(!0)},onDefaultEdit:function(e){this.$emit("openEditDialog",e)},onDefaultView:function(e){this.$emit("onDefaultView",e)},cancel:function(){},confirm:function(){},onRefreshTable:function(){this.getList()},onDefaultDelete:function(e){var t=this;this.$confirm("确认删除？").then(function(a){var r=e.id,o="/procurementOrders/".concat(r);t.global.axios.delete(o).then(function(e){}).catch(function(e){console.log("删除失败")})}).catch(function(e){})}}},m=u,p=(a("1f0c"),a("2877")),d=Object(p["a"])(m,r,o,!1,null,"7ccd0778",null);t["default"]=d.exports},4:function(e,t){},"40e1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.formVisible?a("el-dialog",{attrs:{title:"查看详情 ",visible:e.formVisible,fullscreen:""},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{readonly:"",placeholder:"编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-input",{attrs:{readonly:"",placeholder:"状态"},model:{value:e.form.statusName,callback:function(t){e.$set(e.form,"statusName",t)},expression:"form.statusName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采购计划",prop:"procurementPlan.name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.procurementPlan.name,callback:function(t){e.$set(e.form.procurementPlan,"name",t)},expression:"form.procurementPlan.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供货商",prop:"supplier.name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.supplier.name,callback:function(t){e.$set(e.form.supplier,"name",t)},expression:"form.supplier.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跟单员",prop:"merchandiser"}},[a("el-input",{attrs:{readonly:"",placeholder:"跟单员"},model:{value:e.form.merchandiser,callback:function(t){e.$set(e.form,"merchandiser",t)},expression:"form.merchandiser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算货币",prop:"currency.name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.currency.name,callback:function(t){e.$set(e.form.currency,"name",t)},expression:"form.currency.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收货仓库",prop:"warehouse.name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.warehouse.name,callback:function(t){e.$set(e.form.warehouse,"name",t)},expression:"form.warehouse.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账期",prop:"accountPeriod"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.accountPeriod_,callback:function(t){e.$set(e.form,"accountPeriod_",t)},expression:"form.accountPeriod_"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算方式",prop:"settlementMethod"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请选择"},model:{value:e.form.settlementMethod_,callback:function(t){e.$set(e.form,"settlementMethod_",t)},expression:"form.settlementMethod_"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人",prop:"creator.name"}},[a("el-input",{attrs:{readonly:"",placeholder:"创建人"},model:{value:e.form.creator.name,callback:function(t){e.$set(e.form.creator,"name",t)},expression:"form.creator.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预计完成日期",prop:"procurementPlan.formatCreateTime"}},[a("el-input",{attrs:{type:"datetime",placeholder:"预计完成日期时间",readonly:""},model:{value:e.form.procurementPlan.formatCreateTime,callback:function(t){e.$set(e.form.procurementPlan,"formatCreateTime",t)},expression:"form.procurementPlan.formatCreateTime"}})],1)],1),e._v(" "),a("itemTable",{ref:"itemTable"}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("关 闭")])],1)],1):e._e()},o=[],n=a("3387"),l={props:{},components:{itemTable:n["default"]},data:function(){return{formVisible:!1,loading:!1,event_id:"",test:[],suppliers:[],currency:[],warehouse:[],form:{procurementPlan:{},warehouse:{},supplier:{},currency:{},creator:{}},rules:{}}},created:function(){},methods:{save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.$confirm("确认修改？").then(function(e){}).catch(function(e){})})}},mounted:function(){var e=this;this.$on("openDialog",function(t){e.loading=!0,e.row=t,e.formVisible=!0;var a="/procurementOrders/".concat(t.id,'?relations=["user", "team", "procurementPlan","currency","supplier","warehouse", "creator"]');e.global.axios.get(a).then(function(t){if(200==t.status){var a=t.data,r={1:"货到付款",2:"款到发货",3:"预付定金"};a.accountPeriod?a.accountPeriod_="".concat(a.accountPeriod,"天"):a.accountPeriod_="无",a.settlementMethod_=r[a.settlementMethod],e.form=a}e.loading=!1})})}},i=l,s=a("2877"),c=Object(s["a"])(i,r,o,!1,null,null,null);t["default"]=c.exports},5:function(e,t){},6:function(e,t){},7:function(e,t){}}]);