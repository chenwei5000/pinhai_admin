(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0020738e"],{"5128d":function(e,t,i){},a4de:function(e,t,i){"use strict";var a=i("5128d"),o=i.n(a);o.a},bc3f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editObject",attrs:{rules:e.rules,model:e.editObject,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"发货计划编码",prop:"code"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{"show-word-limit":"",placeholder:"请填写编码",clearable:""},model:{value:e.editObject.code,callback:function(t){e.$set(e.editObject,"code",t)},expression:"editObject.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"发货厂商",prop:"supplierId"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请填写编码",clearable:""},model:{value:e.editObject.supplier.name,callback:function(t){e.$set(e.editObject.supplier,"name",t)},expression:"editObject.supplier.name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"收货仓库",prop:"warehouseId"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:"请选择",change:e.warehouseChange()},model:{value:e.editObject.warehouse.name,callback:function(t){e.$set(e.editObject.warehouse,"name",t)},expression:"editObject.warehouse.name"}},e._l(e.warehouseSelectOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{md:14}},[i("el-form-item",{attrs:{label:"预计发货时间",prop:"expectTime"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"交货截止日"},model:{value:e.editObject.expectTime,callback:function(t){e.$set(e.editObject,"expectTime",t)},expression:"editObject.expectTime"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"备注",prop:"note"}},[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":""},model:{value:e.editObject.note,callback:function(t){e.$set(e.editObject,"note",t)},expression:"editObject.note"}})],1),e._v(" "),i("el-col",{attrs:{span:2}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"备注信息。支持换行！",placement:"right"}},[i("i",{staticClass:"el-icon-question"},[e._v(" ")])])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.onSave}},[e._v("\n          保存基本信息\n        ")])],1)],1)],1)],1)},o=[],s=(i("7f7f"),i("ac6a"),i("c405")),c=i("64dc"),l=i("8492"),r=i("8593"),n=(i("ed08"),{components:{},props:{primary:{type:[Object],default:{}}},computed:{},data:function(){return{loading:!1,confirmLoading:!1,warehouseSelectOptions:[],editObject:{},rules:{code:[{required:!0,message:"必须输入",trigger:"blur"}],supplierId:[{required:!0,message:"必须输入",trigger:"blur"}],warehouseId:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){},mounted:function(){var e=this;this.$nextTick(function(){e.initData()})},methods:{initData:function(){var e=this;if(this.loading=!0,this.primary){this.editObject=this.primary,this.editObject.limitTime=this.primary.formatLimitTime,this.editObject.executeTime=this.primary.formatExecuteTime,this.categorySelectOptions=s["a"].getMineSelectOptions(),this.merchantSelectOptions=l["a"].getSelectOptions(),this.warehouseSelectOptions=c["a"].getSelectDomesticOptions(),r["a"].getConfigInfos().then(function(t){null==e.editObject.safetyStockWeek&&(e.editObject.safetyStockWeek=t.safetyStockWeek),null==e.editObject.vip1SafetyStockWeek&&(e.editObject.vip1SafetyStockWeek=t.vip1SafetyStockWeek),null==e.editObject.vip2SafetyStockWeek&&(e.editObject.vip2SafetyStockWeek=t.vip2SafetyStockWeek)});var t=!0;this.warehouseSelectOptions.forEach(function(e){"-99"==e.value&&(t=!1)}),t&&this.warehouseSelectOptions.unshift({label:"供货商库存",value:"-99"}),this.loading=!1}else this.$message.error("无效的采购计划!"),this.loading=!1},onSave:function(){var e=this;this.$confirm("注意保存基本信息只会修改对应的参数，不会重新计算明细数据，您是否继续？","提示",{type:"warning",beforeClose:function(t,i,a){"confirm"==t?(a(),e.modifyObject()):a()}}).catch(function(e){})},modifyObject:function(){var e=this,t=JSON.parse(JSON.stringify(this.editObject));this.editObject.warehouseId=this.editObject.warehouse.name,this.loading=!0,this.confirmLoading=!0,this.global.axios.put("/procurementShippedOrders/".concat(this.editObject.id),t).then(function(t){var i=t.data;e.$message({type:"success",message:"操作成功"}),e.loading=!1,e.confirmLoading=!1,e.formVisible=!1,e.$emit("modifyCBEvent",i)}).catch(function(t){e.loading=!1,e.confirmLoading=!1})},warehouseChange:function(){this.editObject.warehouseId=this.editObject.warehouse.name}}}),d=n,p=(i("a4de"),i("2877")),u=Object(p["a"])(d,a,o,!1,null,"ff77f0f6",null);t["default"]=u.exports}}]);