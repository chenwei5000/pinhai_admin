(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94b4303a","chunk-54bf7840","chunk-9b4d9f60","chunk-795e8e17"],{4045:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"创建计划",visible:e.formVisible,width:"65%"},on:{"update:visible":function(t){e.formVisible=t}}},[a("fieldset",{staticClass:"panel-heading"},[a("legend",{staticClass:"panel-title"},[e._v("基本信息")]),e._v(" "),a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.plan,rules:e.rules,"label-width":"100px",inline:!0}},[a("el-form-item",{attrs:{label:"开船时间",prop:"etdTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:e.plan.etdTime,callback:function(t){e.$set(e.plan,"etdTime",t)},expression:"plan.etdTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.plan.code,callback:function(t){e.$set(e.plan,"code",t)},expression:"plan.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运输方式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.plan.type,callback:function(t){e.$set(e.plan,"type",t)},expression:"plan.type"}},[a("el-option",{attrs:{label:"海运",value:"海运"}}),e._v(" "),a("el-option",{attrs:{label:"空运",value:"空运"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发货港口",prop:"portOfLoading"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.plan.portOfLoading,callback:function(t){e.$set(e.plan,"portOfLoading",t)},expression:"plan.portOfLoading"}},e._l(e.harbours,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发货仓库",prop:"fromWarehouseId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.plan.fromWarehouseId,callback:function(t){e.$set(e.plan,"fromWarehouseId",t)},expression:"plan.fromWarehouseId"}},e._l(e.fromWarehouses,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"收货仓库",prop:"toWarehouseId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.plan.toWarehouseId,callback:function(t){e.$set(e.plan,"toWarehouseId",t)},expression:"plan.toWarehouseId"}},e._l(e.toWarehouses,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.plan.categoryId,callback:function(t){e.$set(e.plan,"categoryId",t)},expression:"plan.categoryId"}},e._l(e.categorys,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"merchandiserId"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.plan.merchandiserId,callback:function(t){e.$set(e.plan,"merchandiserId",t)},expression:"plan.merchandiserId"}},e._l(e.users,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否打托："}},[a("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.plan.pallet,callback:function(t){e.$set(e.plan,"pallet",t)},expression:"plan.pallet"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",value:"0"},model:{value:e.plan.pallet,callback:function(t){e.$set(e.plan,"pallet",t)},expression:"plan.pallet"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"Oversize："}},[a("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.plan.oversize,callback:function(t){e.$set(e.plan,"oversize",t)},expression:"plan.oversize"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"0"},model:{value:e.plan.oversize,callback:function(t){e.$set(e.plan,"oversize",t)},expression:"plan.oversize"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.plan.detail,callback:function(t){e.$set(e.plan,"detail",t)},expression:"plan.detail"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createPlan}},[e._v("确 定")])],1)])},r=[],o=(a("7f7f"),a("ac6a"),a("ec34")),i=a("c405"),s=a("c24f"),n=a("4080"),c=a("5c96"),m=null,d=function(){m=c["Loading"].service({fullscreen:!0})},u=function(){m&&m.close()},f={props:{},data:function(){return{fromWarehouses:[],toWarehouses:[],harbours:[],categorys:[],users:[],formVisible:!1,plan:{etdTime:"",code:"",type:"",portOfLoading:"",fromWarehouseId:"",toWarehouseId:"",categoryId:[],merchandiserId:[],referenceId:"",shipmentId:"",pallet:"",oversize:"",detail:""},rules:{etdTime:[{required:!0,message:"开船时间不能为空",trigger:"blur"}],type:[{required:!0,message:"运输方式不能为空",trigger:"blur"}],portOfLoading:[{required:!0,message:"发货港口不能为空",trigger:"blur"}],fromWarehouseId:[{required:!0,message:"发货仓库不能为空",trigger:"blur"}],toWarehouseId:[{required:!0,message:"收货仓库不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"分类不能为空",trigger:"blur"}],merchandiserId:[{required:!0,message:"负责人不能为空",trigger:"blur"}]}}},methods:{createPlan:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.plan.category=e.plan.categoryId.join(","),e.plan.merchandiser=e.plan.merchandiserId.join(","),d(),e.global.axios.post("/linerShippingPlans",e.plan).then(function(t){if(200==t.status){var a=t.data,l=n["a"].generateEventTitle(a);e.$emit("addCalendarEvent",a,l),u(),e.formVisible=!1}})})}},mounted:function(){var e=this;this.$on("openDialog",function(t){e.formVisible=!0,e.plan.etdTime=t;var a=["etdTime","code","type","portOfLoading","fromWarehouseId","toWarehouseId","categoryId","merchandiserId","pallet","oversize","referenceId","shipmentId","detail"];a.forEach(function(a){e.plan[a]="etdTime"===a?t:"categoryId"===a||"merchandiserId"===a?[]:""});var l='/warehouses?filters={"groupOp":"AND","rules":[{"field":"status","op":"eq","data":"1"}]}&sort=type asc,name';e.global.axios(l).then(function(t){200==t.status&&t.data.forEach(function(t){"工厂仓"==t.type||"普通"==t.type||"虚拟仓"==t.type?e.fromWarehouses.push({value:t.id,label:t.name}):"海外仓"==t.type&&e.toWarehouses.push({value:t.id,label:t.name})})}),e.harbours=o["a"].getSelectNameOptions(),e.categorys=i["a"].getMineSelectProdcutNameOptions(),e.users=s["a"].getSelectNameOptions()})}},p=f,v=a("2877"),b=Object(v["a"])(p,l,r,!1,null,null,null);t["default"]=b.exports},4080:function(e,t,a){"use strict";a("b1ef"),a("4360");var l={generateEventTitle:function(e){if(!e)return null;var t="label-grey",a='&nbsp;&nbsp;<i class="el-icon-ship"></i>&nbsp;&nbsp;';if("空运"==e.type&&(a='&nbsp;&nbsp;<i class="el-icon-s-promotion"></i>&nbsp;&nbsp;'),e.code&&(a+="("+e.code+") "),e.portOfLoading&&(a+="["+e.portOfLoading+"] "),e.categoryName&&(a+=e.categoryName),e.status>5&&e.status<11)switch(e.status){case 6:a+=" (SHIPPED)";break;case 7:a+=" (IN_TRANSIT)";break;case 8:a+=" (DELIVERED)";break;case 9:a+=" (CHECKED_IN)";break;case 10:a+=" (RECEIVING)";break}return t=11==e.status?"label-inverse":12==e.status?"label-pink":e.status>=6?"label-info":e.overdue?"label-danger":1==e.status?"label-grey":2==e.status?"label-yellow":3==e.status?"label-success":"label-pink",{className:t,title:a}}};t["a"]=l},9719:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"",visible:e.formVisible,width:"65%"},on:{"update:visible":function(t){e.formVisible=t}}},[a("fieldset",{staticClass:"panel-heading"},[a("legend",{staticClass:"panel-title"},[e._v("订船信息")]),e._v(" "),a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px",inline:!0}},[a("el-form-item",{attrs:{label:"船运公司",prop:"carrier"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.carrier,callback:function(t){e.$set(e.form,"carrier",t)},expression:"form.carrier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"货代公司",prop:"forwardingCompany"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.forwardingCompany,callback:function(t){e.$set(e.form,"forwardingCompany",t)},expression:"form.forwardingCompany"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目的港口"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.portOfDestination,callback:function(t){e.$set(e.form,"portOfDestination",t)},expression:"form.portOfDestination"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"船名航次"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.vesselName,callback:function(t){e.$set(e.form,"vesselName",t)},expression:"form.vesselName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物流单号"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.so,callback:function(t){e.$set(e.form,"so",t)},expression:"form.so"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提单号"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.ladingBillNumber,callback:function(t){e.$set(e.form,"ladingBillNumber",t)},expression:"form.ladingBillNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"箱号"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.boxNumber,callback:function(t){e.$set(e.form,"boxNumber",t)},expression:"form.boxNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封条号"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form.sealNumber,callback:function(t){e.$set(e.form,"sealNumber",t)},expression:"form.sealNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"FBA ID"}},[a("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.shipmentId,callback:function(t){e.$set(e.form,"shipmentId",t)},expression:"form.shipmentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Reference ID"}},[a("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.referenceId,callback:function(t){e.$set(e.form,"referenceId",t)},expression:"form.referenceId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开船时间",prop:"etdTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.etdTime,callback:function(t){e.$set(e.form,"etdTime",t)},expression:"form.etdTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截单时间",prop:"bookingClosingTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.bookingClosingTime,callback:function(t){e.$set(e.form,"bookingClosingTime",t)},expression:"form.bookingClosingTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截港时间",prop:"cyClosingTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.cyClosingTime,callback:function(t){e.$set(e.form,"cyClosingTime",t)},expression:"form.cyClosingTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预计到港时间",prop:"etaTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.etaTime,callback:function(t){e.$set(e.form,"etaTime",t)},expression:"form.etaTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预约送仓时间",prop:"bookingTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.bookingTime,callback:function(t){e.$set(e.form,"bookingTime",t)},expression:"form.bookingTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订船备注"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.form.shipDetail,callback:function(t){e.$set(e.form,"shipDetail",t)},expression:"form.shipDetail"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.navigateTo}},[e._v("跳 转")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])},r=[],o=(a("ec34"),a("c405"),a("c24f"),a("4080")),i=a("5c96"),s=null,n=function(){s=i["Loading"].service({fullscreen:!0})},c=function(){s&&s.close()},m={props:{},data:function(){return{fromWarehouses:[],toWarehouses:[],harbours:[],categorys:[],users:[],formVisible:!1,event_id:"",form:{carrier:"",forwardingCompany:"",portOfDestination:"",vesselName:"",so:"",etdTime:"",ladingBillNumber:"",boxNumber:"",sealNumber:"",bookingClosingTime:"",cyClosingTime:"",etaTime:"",bookingTime:"",shipmentId:"",referenceId:""},rules:{etdTime:[{required:!0,message:"开船时间不能为空",trigger:"blur"}],carrier:[{required:!0,message:"船运公司不能为空",trigger:"blur"}],forwardingCompany:[{required:!0,message:"货代公司不能为空",trigger:"blur"}],bookingClosingTime:[{required:!0,message:"截单时间不能为空",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;n(),e.global.axios.put("/linerShippingPlans/shipDate/".concat(e.event_id),e.form).then(function(t){if(200==t.status){var a=t.data,l=o["a"].generateEventTitle(a);e.$emit("editCalendarEvent",a,l),c(),e.formVisible=!1}})})},navigateTo:function(){console.log("跳转"),this.$router.push({path:"/dashboard"})}},mounted:function(){var e=this;this.$on("openDialog",function(t){e.event_id=t,e.global.axios.get("/linerShippingPlans/".concat(t)).then(function(t){200===t.status&&(e.formVisible=!0,e.form=t.data,e.form.etdTime=e.form.formatEtdTime,e.form.bookingClosingTime=e.form.formatBookingClosingTime,e.form.cyClosingTime=e.form.formatCyClosformatCyClosingTimeingTime,e.form.etaTime=e.form.formatEtaTime,e.form.bookingTime=e.form.formatBookingTime)})})}},d=m,u=a("2877"),f=Object(u["a"])(d,l,r,!1,null,null,null);t["default"]=f.exports},a809:function(e,t,a){"use strict";var l=a("f209"),r=a.n(l);r.a},b2ed:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"ph-card"},[a("div",{staticClass:"ph-card-body"},[a("full-Calendar",{ref:"fullCalendar",attrs:{defaultView:"dayGridMonth",locale:"zh",selectable:"true",editable:"true",droppable:"false",header:e.calendarOptions.header,buttonText:e.calendarOptions.buttonText,eventRender:e.calendarOptions.eventRender,plugins:e.calendarPlugins,weekends:e.calendarWeekends,events:e.calendarEvents},on:{dateClick:e.handleDateClick,eventClick:e.handleEventClick,datesRender:e.handleDatesRender}})],1)]),e._v(" "),a("createEvent",{ref:"createEvent",on:{addCalendarEvent:e.addCalendarEvent}}),e._v(" "),a("editEvent",{ref:"editEvent",on:{editCalendarEvent:e.editCalendarEvent}}),e._v(" "),a("shipInfo",{ref:"shipInfo"})],1)},r=[],o=a("dc09"),i=a("3cdd"),s=a.n(i),n=a("3e32"),c=a.n(n),m=a("a20c"),d=a.n(m),u=a("b9b9"),f=a.n(u),p=a("4080"),v=a("4045"),b=a("fd4c"),h=a("9719"),g={components:{fullCalendar:o["a"],createEvent:v["default"],editEvent:b["default"],shipInfo:h["default"]},name:"plan",data:function(){return{calendarPlugins:[s.a,c.a,d.a],calendarOptions:{header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek"},buttonText:{today:"今天",month:"月视图",week:"周视图",day:"日视图"},eventRender:function(e){e.el.innerHTML=e.event.title}},calendarWeekends:!0,calendarEvents:[]}},methods:{handleDatesRender:function(e){var t=this,a=f()(e.view.activeStart,"yyyy-mm-dd"),l=f()(e.view.activeEnd,"yyyy-mm-dd"),r='/linerShippingPlans?relations=["fromWarehouse","toWarehouse","creator"]&startTime='.concat(a,"&endTime=").concat(l);this.global.axios.get(r).then(function(e){if(200==e.status){t.calendarEvents=[];for(var a=e.data,l=0;l<a.length;l++){var r=a[l],o=p["a"].generateEventTitle(r);t.addCalendarEvent(r,o)}}})},handleEventClick:function(e){this.$refs.shipInfo.$emit("openDialog",e.event.id)},handleDateClick:function(e,t){this.$refs.createEvent.$emit("openDialog",e.dateStr)},moreClick:function(e,t,a){},addCalendarEvent:function(e,t){this.calendarEvents.push({id:e.id,start:e.formatEtdTime,title:t.title,className:t.className})},editCalendarEvent:function(e,t){for(var a=0;a<this.calendarEvents.length;a++)this.calendarEvents[a].id==e.id&&(this.calendarEvents[a].start=e.formatEtdTime,this.calendarEvents[a].title=t.title,this.calendarEvents[a].className=t.className)}}},y=g,k=(a("a809"),a("2877")),_=Object(k["a"])(y,l,r,!1,null,null,null);t["default"]=_.exports},f209:function(e,t,a){},fd4c:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑计划",visible:e.formVisible,width:"65%"},on:{"update:visible":function(t){e.formVisible=t}}},[a("fieldset",{staticClass:"panel-heading"},[a("legend",{staticClass:"panel-title"},[e._v("基本信息")]),e._v(" "),a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px",inline:!0}},[a("el-form-item",{attrs:{label:"开船时间",prop:"etdTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",readonly:""},model:{value:e.form.etdTime,callback:function(t){e.$set(e.form,"etdTime",t)},expression:"form.etdTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运输方式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"海运",value:"海运"}}),e._v(" "),a("el-option",{attrs:{label:"空运",value:"空运"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发货港口",prop:"portOfLoading"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.portOfLoading,callback:function(t){e.$set(e.form,"portOfLoading",t)},expression:"form.portOfLoading"}},e._l(e.harbours,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发货仓库",prop:"fromWarehouseId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fromWarehouseId,callback:function(t){e.$set(e.form,"fromWarehouseId",t)},expression:"form.fromWarehouseId"}},e._l(e.fromWarehouses,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"收货仓库",prop:"toWarehouseId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.toWarehouseId,callback:function(t){e.$set(e.form,"toWarehouseId",t)},expression:"form.toWarehouseId"}},e._l(e.toWarehouses,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}},e._l(e.categorys,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"merchandiserId"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.form.merchandiserId,callback:function(t){e.$set(e.form,"merchandiserId",t)},expression:"form.merchandiserId"}},e._l(e.users,function(e,t){return a("el-option",{key:t+"-"+e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"FBA ID"}},[a("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.shipmentId,callback:function(t){e.$set(e.form,"shipmentId",t)},expression:"form.shipmentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Reference ID"}},[a("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.referenceId,callback:function(t){e.$set(e.form,"referenceId",t)},expression:"form.referenceId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否打托："}},[a("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.form.pallet,callback:function(t){e.$set(e.form,"pallet",t)},expression:"form.pallet"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",value:"0"},model:{value:e.form.pallet,callback:function(t){e.$set(e.form,"pallet",t)},expression:"form.pallet"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"150px"},attrs:{label:"Oversize："}},[a("el-radio",{attrs:{label:"1",value:"1"},model:{value:e.form.oversize,callback:function(t){e.$set(e.form,"oversize",t)},expression:"form.oversize"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2",value:"0"},model:{value:e.form.oversize,callback:function(t){e.$set(e.form,"oversize",t)},expression:"form.oversize"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])},r=[],o=(a("7f7f"),a("ac6a"),a("28a5"),a("ec34")),i=a("c405"),s=a("c24f"),n=a("4080"),c=a("5c96"),m=null,d=function(){m=c["Loading"].service({fullscreen:!0})},u=function(){m&&m.close()},f={props:{},data:function(){return{fromWarehouses:[],toWarehouses:[],harbours:[],categorys:[],users:[],formVisible:!1,event_id:"",form:{etdTime:"",code:"",type:"",portOfLoading:"",fromWarehouseId:"",toWarehouseId:"",categoryId:[],merchandiserId:[],pallet:"",oversize:"",detail:""},rules:{etdTime:[{required:!0,message:"开船时间不能为空",trigger:"blur"}],type:[{required:!0,message:"运输方式不能为空",trigger:"blur"}],portOfLoading:[{required:!0,message:"发货港口不能为空",trigger:"blur"}],fromWarehouseId:[{required:!0,message:"发货仓库不能为空",trigger:"blur"}],toWarehouseId:[{required:!0,message:"收货仓库不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"分类不能为空",trigger:"blur"}],merchandiserId:[{required:!0,message:"负责人不能为空",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.category=e.form.categoryId.join(","),e.form.merchandiser=e.form.merchandiserId.join(","),d(),e.global.axios.put("/linerShippingPlans/".concat(e.event_id),e.form).then(function(t){if(200==t.status){var a=t.data,l=n["a"].generateEventTitle(a);e.$emit("editCalendarEvent",a,l),u(),e.formVisible=!1}})})}},mounted:function(){var e=this;this.$on("openDialog",function(t){e.event_id=t,e.global.axios.get("/linerShippingPlans/".concat(t)).then(function(t){200===t.status&&(e.formVisible=!0,e.form=t.data,e.form.etdTime=e.form.formatEtdTime,e.form.categoryId=e.form.categoryName.split(","),e.form.merchandiserId=e.form.merchandiserName.split(","),e.form.pallet="".concat(e.form.pallet),e.form.oversize="".concat(e.form.oversize))});var a='/warehouses?filters={"groupOp":"AND","rules":[{"field":"status","op":"eq","data":"1"}]}&sort=type asc,name';e.global.axios(a).then(function(t){200==t.status&&t.data.forEach(function(t){"工厂仓"==t.type||"普通"==t.type||"虚拟仓"==t.type?e.fromWarehouses.push({value:t.id,label:t.name}):"海外仓"==t.type&&e.toWarehouses.push({value:t.id,label:t.name})})}),e.harbours=o["a"].getSelectNameOptions(),e.categorys=i["a"].getMineSelectProdcutNameOptions(),e.users=s["a"].getSelectNameOptions()})}},p=f,v=a("2877"),b=Object(v["a"])(p,l,r,!1,null,null,null);t["default"]=b.exports}}]);