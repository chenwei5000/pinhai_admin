(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf2718ec","chunk-2d22cc88","chunk-2d237b20"],{"45b8":function(t,e,i){},b76e:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ph-table"},[i("el-form",{ref:"searchForm",attrs:{inline:!0,model:t.searchParam,id:"filter-form"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"SKU"}},[i("el-input",{attrs:{placeholder:"请输入SKU",clearable:""},model:{value:t.searchParam.skuCode,callback:function(e){t.$set(t.searchParam,"skuCode",e)},expression:"searchParam.skuCode"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{"native-type":"submit",type:"primary",size:"small"},on:{click:t.search}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.resetSearch}},[t._v("重置")])],1)],1),t._v(" "),i("tableToolBar",t._b({on:{onToolBarAdd:t.onToolBarAdd,onToolBarEdit:t.onToolBarEdit,onToolBarDelete:t.onToolBarDelete}},"tableToolBar",t.toolbarConfig,!1)),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",border:"","highlight-current-row":"","max-height":t.tableMaxHeight,"row-class-name":t.dangerClassName,"cell-class-name":"ph-cell","header-cell-class-name":"ph-cell-header",data:t.tableData,"show-summary":"","summary-method":t.getSummaries,"default-sort":{prop:"product.skuCode",order:"ascending"},id:"table"}},[i("el-table-column",{attrs:{prop:"sortNum",label:"序号",sortable:"",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:0===e.row.status?"warning":3===e.row.status?"primary":6===e.row.status?"info":"success","disable-transitions":""}},[t._v(t._s(e.row.statusName)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"skuCode",label:"SKU编码",width:"200",fixed:"left"}}),t._v(" "),i("el-table-column",{attrs:{prop:"product.name",label:"产品名",width:"200",fixed:"left"}}),t._v(" "),i("el-table-column",{attrs:{prop:"boxCode",label:"箱码",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shippedCartonQty",label:"发货数量(箱)",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"storageLocation.code",label:"存放货位",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"shippedQty",label:"总发货件数",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedQty",label:"收货数量",width:"90"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedNote",sortable:"",label:"异常备注",width:"130"}}),t._v(" "),i("el-table-column",{attrs:{prop:"receivedCartonQty",sortable:"",label:"合计箱数",width:"120",fixed:"right"}}),t._v(" "),t.hasOperation?i("el-table-column",{attrs:{label:"操作","no-export":"true",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[4===t.primary.status?i("el-button",{attrs:{size:"small",icon:"el-icon-edit",circle:"",type:"primary",id:"ph-table-edit"},on:{click:function(i){return t.onDefaultEdit(e.row)}}}):t._e(),t._v(" "),4!==t.primary.status?i("el-button",{attrs:{size:"small",icon:"el-icon-view",circle:"",type:"primary",id:"ph-table-view"},on:{click:function(i){return t.onDefaultView(e.row)}}}):t._e()]}}],null,!1,3381475421)}):t._e()],1),t._v(" "),i("itemDialog",{ref:"itemDialog",attrs:{primaryId:t.primary.id},on:{modifyCBEvent:t.modifyCBEvent}}),t._v(" "),i("itemDialog2",{ref:"itemDialog2",attrs:{primaryId:t.primary.id},on:{modifyCBEvent:t.modifyCBEvent2}})],1)},a=[],o=(i("386d"),i("c5f6"),i("ac6a"),i("cebc")),r=i("2f62"),s=i("ed08"),n=i("a4af"),d=i("c971"),c=i("f569"),u=i("fbe3"),m={components:{tableToolBar:n["a"],itemDialog:c["default"],itemDialog2:u["default"]},props:{primary:{type:[Object],default:null}},computed:Object(o["a"])({},Object(r["b"])(["device","rolePower"])),filters:{currency:s["b"]},data:function(){return{statusSelectOptions:[],tableMaxHeight:"mobile"!==this.device?500:4e7,confirmLoading:!1,hasOperation:!0,hasAdd:!1,hasEdit:!0,hasDelete:!1,hasView:!0,selected:[],url:"/procurementReceivedOrderItems",downloadUrl:"",searchParam:{skuCode:null},filters:[{field:"procurementShippedOrderId",op:"eq",data:this.primary?this.primary.id:-1}],relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],data:[],tableData:[],loading:!1,row:{},toolbarConfig:{hasEdit:!0,hasDelete:!1,hasAdd:!1,hasExportTpl:!1,hasExport:!1,hasImport:!1,hasView:!0}}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.initData(),t.getList()})},methods:{initData:function(){this.loading=!0,this.statusSelectOptions=d["a"].getSelectOptions("ProcurementShippedOrderStatus"),this.downloadUrl=this.url,this.filters&&this.filters.length>0&&(this.downloadUrl+="?filters="+JSON.stringify({groupOp:"AND",rules:this.filters})),this.relations&&this.relations.length>0&&(this.downloadUrl+="&relations="+JSON.stringify(this.relations)),this.loading=!1},dangerClassName:function(t){t.row},getSummaries:function(t){var e=t.columns,i=t.data,l=[];return e.forEach(function(t,e){if("product.skuCode"==t.property){var a=i.map(function(e){return e[t.property]});l[e]=a.reduce(function(t){return t+1},0),l[e]="合计: "+l[e]+" 行"}if("cartonQty"==t.property){var o=i.map(function(e){return Number(e[t.property])});o.every(function(t){return isNaN(t)})?l[e]="N/A":(l[e]=o.reduce(function(t,e){var i=Number(e);return isNaN(i)?t:t+e},0),l[e]+=" 箱")}if("amount"==t.property){var r=i.map(function(e){return Number(e[t.property])});r.every(function(t){return isNaN(t)})?l[e]="N/A":(l[e]=r.reduce(function(t,e){var i=Number(e);return isNaN(i)?t:t+e},0),l[e]=Object(s["b"])(l[e]))}}),l},getList:function(){var t=this,e=this.url,i="";e?(this.filters&&this.filters.length>0&&(i+="?filters="+JSON.stringify({groupOp:"AND",rules:this.filters})),this.relations&&this.relations.length>0&&(i+="&relations="+JSON.stringify(this.relations)),this.loading=!0,this.global.axios.get(e+i).then(function(e){var i=e.data,l=i||[];t.data=l,t.search(),t.total=i.length||0,t.loading=!1,t.$emit("update",l,i)}).catch(function(e){t.$emit("error",e),t.loading=!1})):console.warn("url 为空, 不发送请求")},search:function(){var t=this;this.tableData=this.data,null!=this.searchParam.skuCode&&""!=this.searchParam.skuCode&&(this.tableData=this.tableData.filter(function(e){if(e.product&&-1!==e.product.skuCode.indexOf(t.searchParam.skuCode))return!0}))},resetSearch:function(){this.$refs.searchForm.resetFields(),this.searchParam.skuCode=null,this.search()},onDefaultEdit:function(t){this.$refs.itemDialog.openDialog(t.id)},onDefaultView:function(t){this.$refs.itemDialog2.openDialog2(t.id)},modifyCBEvent:function(t){this.getList()},modifyCBEvent2:function(t){this.getList()},onToolBarAdd:function(){this.$refs.itemDialog.openDialog(null)},onToolBarEdit:function(){},onToolBarDelete:function(){}}},p=m,h=(i("c9b6"),i("2877")),f=Object(h["a"])(p,l,a,!1,null,"7cf22634",null);e["default"]=f.exports},c9b6:function(t,e,i){"use strict";var l=i("45b8"),a=i.n(l);a.a},f569:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dialogVisible?i("el-dialog",{attrs:{title:t.dialogTitle,"append-to-body":"",width:"80%",top:"20px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:t.rules,model:t.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"序号",prop:"sortNum"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.sortNum,callback:function(e){t.$set(t.detailItem,"sortNum",e)},expression:"detailItem.sortNum"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"SKU编码",prop:"skuCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.skuCode,callback:function(e){t.$set(t.detailItem,"skuCode",e)},expression:"detailItem.skuCode"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"箱码",prop:"boxCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.boxCode,callback:function(e){t.$set(t.detailItem,"boxCode",e)},expression:"detailItem.boxCode"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"产品名",prop:"productId"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{disabled:!0},model:{value:t.detailItem.productId,callback:function(e){t.$set(t.detailItem,"productId",e)},expression:"detailItem.productId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"发货数量(箱)",prop:"shippedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedCartonQty,callback:function(e){t.$set(t.detailItem,"shippedCartonQty",e)},expression:"detailItem.shippedCartonQty"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"存放货位",prop:"storageLocationId",type:"hidden"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.storageLocationId,callback:function(e){t.$set(t.detailItem,"storageLocationId",e)},expression:"detailItem.storageLocationId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"总发货件数",prop:"shippedQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedQty,callback:function(e){t.$set(t.detailItem,"shippedQty",e)},expression:"detailItem.shippedQty"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"收货数量",prop:"receivedQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{precision:"2"},model:{value:t.detailItem.receivedQty,callback:function(e){t.$set(t.detailItem,"receivedQty",e)},expression:"detailItem.receivedQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"异常备注",prop:"receivedNote"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":""},model:{value:t.detailItem.receivedNote,callback:function(e){t.$set(t.detailItem,"receivedNote",e)},expression:"detailItem.receivedNote"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"合计箱数",prop:"receivedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.receivedCartonQty,callback:function(e){t.$set(t.detailItem,"receivedCartonQty",e)},expression:"detailItem.receivedCartonQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:24}},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.onSave}},[t._v("\n            保存\n          ")])],1)],1)],1)],1)],1):t._e()},a=[],o=(i("c5f6"),{components:{},props:{primaryId:{type:Number,default:null}},computed:{dialogTitle:function(){return null==this.detailItemId?"添加采购入库明细":"采购入库明细"}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,url:"/procurementReceivedOrderItems",relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],detailItemId:null,detailItem:{sortNum:null,skuCode:null,boxCode:null,shippedCartonQty:null,storageLocationId:null,shippedQty:null,receivedQty:null,receivedNote:null,receivedCartonQty:null,productId:null},rules:{}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var t=this;if(this.detailItemId){this.loading=!0;var e="".concat(this.url,"/").concat(this.detailItemId);this.relations&&this.relations.length>0&&(e+="?relations="+JSON.stringify(this.relations)),this.global.axios.get(e).then(function(e){var i=e.data,l=i||{};t.detailItem=l,t.loading=!1})}},openDialog:function(t){this.detailItemId=t,this.dialogVisible=!0,this.initData()},onSave:function(){var t=this;this.global.axios.put("/procurementReceivedOrderItems/".concat(this.detailItemId),this.detailItem).then(function(e){t.$message.info("修改成功"),t.loading=!1,t.confirmLoading=!1,t.dialogVisible=!1,t.$emit("modifyCBEvent",e.data)}).catch(function(e){t.loading=!1,t.confirmLoading=!1})}}}),r=o,s=i("2877"),n=Object(s["a"])(r,l,a,!1,null,"5830df78",null);e["default"]=n.exports},fbe3:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.dialogVisible?i("el-dialog",{attrs:{title:t.dialogTitle,"append-to-body":"",width:"80%",top:"20px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"detailItem",attrs:{rules:t.rules,model:t.detailItem,"status-icon":"",inline:"","label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"序号",prop:"sortNum"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.sortNum,callback:function(e){t.$set(t.detailItem,"sortNum",e)},expression:"detailItem.sortNum"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"SKU编码",prop:"skuCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.skuCode,callback:function(e){t.$set(t.detailItem,"skuCode",e)},expression:"detailItem.skuCode"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"箱码",prop:"boxCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.boxCode,callback:function(e){t.$set(t.detailItem,"boxCode",e)},expression:"detailItem.boxCode"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"产品名",prop:"productId"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{disabled:!0},model:{value:t.detailItem.productId,callback:function(e){t.$set(t.detailItem,"productId",e)},expression:"detailItem.productId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"发货数量(箱)",prop:"shippedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedCartonQty,callback:function(e){t.$set(t.detailItem,"shippedCartonQty",e)},expression:"detailItem.shippedCartonQty"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"存放货位",prop:"storageLocationId",type:"hidden"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.storageLocationId,callback:function(e){t.$set(t.detailItem,"storageLocationId",e)},expression:"detailItem.storageLocationId"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"总发货件数",prop:"shippedQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.shippedQty,callback:function(e){t.$set(t.detailItem,"shippedQty",e)},expression:"detailItem.shippedQty"}})],1)],1),t._v(" "),i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"收货数量",prop:"receivedQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{precision:"2",disabled:!0},model:{value:t.detailItem.receivedQty,callback:function(e){t.$set(t.detailItem,"receivedQty",e)},expression:"detailItem.receivedQty"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"异常备注",prop:"receivedNote"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:"3",cols:"80","show-word-limit":"",disabled:!0},model:{value:t.detailItem.receivedNote,callback:function(e){t.$set(t.detailItem,"receivedNote",e)},expression:"detailItem.receivedNote"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{md:10}},[i("el-form-item",{attrs:{label:"合计箱数",prop:"receivedCartonQty"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:t.detailItem.receivedCartonQty,callback:function(e){t.$set(t.detailItem,"receivedCartonQty",e)},expression:"detailItem.receivedCartonQty"}})],1)],1)],1)],1)],1):t._e()},a=[],o=(i("c5f6"),{components:{},props:{primaryId:{type:Number,default:null}},computed:{dialogTitle:function(){return null==this.detailItemId?"添加采购入库明细":"采购入库明细"}},data:function(){return{dialogVisible:!1,loading:!1,confirmLoading:!1,url:"/procurementReceivedOrderItems",relations:["product","cartonSpec","procurementShippedOrder","procurementOrderItem","storageLocation"],detailItemId:null,detailItem:{sortNum:null,skuCode:null,boxCode:null,shippedCartonQty:null,storageLocationId:null,shippedQty:null,receivedQty:null,receivedNote:null,receivedCartonQty:null,productId:null},rules:{}}},created:function(){},mounted:function(){this.$nextTick(function(){})},methods:{initData:function(){var t=this;if(this.detailItemId){this.loading=!0;var e="".concat(this.url,"/").concat(this.detailItemId);this.relations&&this.relations.length>0&&(e+="?relations="+JSON.stringify(this.relations)),this.global.axios.get(e).then(function(e){var i=e.data,l=i||{};t.detailItem=l,t.detailItem=JSON.parse(JSON.stringify(t.detailItem)),t.loading=!1})}},openDialog2:function(t){this.detailItemId=t,this.dialogVisible=!0,this.initData()}}}),r=o,s=i("2877"),n=Object(s["a"])(r,l,a,!1,null,"13fd7078",null);e["default"]=n.exports}}]);