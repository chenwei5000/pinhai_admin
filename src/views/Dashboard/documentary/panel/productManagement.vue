<template>

  <div class="card-panel">
    <router-link to="/m2/Product_index">
      <div class="card-header">
        <svg t="1571803791855" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14709" width="40" height="40"><path d="M883.0425333 303.6607543a16.1197708 16.1197708 0 0 0-0.99922236-2.1324542c-0.04586924-0.0800455-0.10073144-0.15109717-0.14750068-0.22934443-9.12521338-18.17397773-23.37605068-33.71004492-41.42771192-44.25629502L564.45423594 95.78379482c-33.14612724-19.3647709-74.3292044-19.3647709-107.47623076 0L181.2042793 256.90055732c-18.12631026 10.59031933-32.40682822 26.18484697-41.52304688 44.42717813-0.03687539 0.06205781-0.0800455 0.1169209-0.11512265 0.17987871-0.3993293 0.69522891-0.72041133 1.41204287-1.00461885 2.13695068-6.6303044 14.1042375-10.21887158 29.69156953-10.14422168 45.72949571l1.51187519 325.8238913c0.1726831 37.18798682 20.14004531 72.08972315 52.11066885 91.08484453l274.50468545 163.10531427c16.82129531 9.99402363 35.62214854 14.98563984 54.41670528 14.98563984 19.20647813-0.00089912 38.40666065-5.21376503 55.47798632-15.62780391l275.77102676-168.24083291a106.76481328 106.76481328 0 0 0 37.41283476-38.79609609 106.7594168 106.7594168 0 0 0 13.63385567-52.14394688V349.02149961c0-15.9048167-3.61015224-31.36533398-10.21437422-45.36074531zM473.11396455 123.40316885c23.19437461-13.54931367 52.01173565-13.54931367 75.20431201 0l276.01476152 161.2579667a74.29232988 74.29232988 0 0 1 21.58176798 19.10484667L704.77080136 384.48175713 379.99559903 177.80638291l93.11836552-54.40321406z m-275.77282588 161.1167625l151.59222071-88.56565225 324.45681767 206.47301132-163.19165537 93.32342667L175.64155068 303.76958047a74.32560703 74.32560703 0 0 1 21.69958799-19.24964912z m1.037896 454.26490839c-22.37053271-13.29118857-36.34255987-37.71412998-36.46307813-63.73438769l-1.51187431-325.8238913a74.00722324 74.00722324 0 0 1 1.75201172-16.31673721l332.04767168 190.5421122 0.50545722 387.11553574a74.69435742 74.69435742 0 0 1-21.82460274-8.6773166L198.37903467 738.78483974z m662.89195986-69.21796992c0 25.80800185-13.68781963 50.1913705-35.71928261 63.63275713L549.77978516 901.44045898a74.6610794 74.6610794 0 0 1-23.08374932 9.24303341l-0.50545722-387.22975841 333.28343408-190.59337705a73.95685752 73.95685752 0 0 1 1.79788095 16.16114268v320.54537021z m-65.6473913-196.00051201c4.2900917 7.72126523 1.50737783 17.45806377-6.21388741 21.74815459L645.97766328 574.99868692a15.91381055 15.91381055 0 0 1-7.75274414 2.01553329c-5.62028906 0-11.07239326-2.9679873-13.99541045-8.2294207-4.2900917-7.72126523-1.50737783-17.45806377 6.21388652-21.74815459l143.43295255-79.68417363c7.72036523-4.2900917 17.45806377-1.50737783 21.74725546 6.21388652z" fill="#d81e06" p-id="14710"></path></svg>
        </div>
      产品信息不全

      <div class="card-body">
        <count-to :start-val="0" :end-val="number" :duration="2600" class="card-panel-num"/>
      </div>

    </router-link>
  </div>

</template>

<script>
  import CountTo from 'vue-count-to'
  export default {
    data(){
      return {
        number: 0,
        relations: ["category","supplier","cartonSpec","currency","declareConfig"] ,
        filters:[
          {"field":"status","op":"in","data":1}
          ],
      }
    },

    props: {
      mine: {
        type: Object,
      }
    },
    components: {
      CountTo
    },

    mounted(){
      this.$nextTick(() => {
        this.initData();
      })
    },

    methods: {
      initData(){
        let countUrl = "products/countUnfinishs";
        countUrl += "?relations=" + JSON.stringify(this.relations);
        countUrl += "&filters=" + JSON.stringify({"groupOp": "AND", "rules": this.filters});
        this.global.axios
          .get(countUrl)
          .then(resp => {
            this.number = resp.data;
          })
          .catch(err => {
          })
      }
    }
  }
</script>

<style lang="scss" scoped>
  @import "@/assets/css/panel.less";
</style>
