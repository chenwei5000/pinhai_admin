<template>

  <div class="card-panel">
    <router-link to="/m2/ProductToMaterial_index">
      <div class="card-header">
        <svg t="1571803487857" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8250" width="40" height="40"><path d="M204.8 614.4C92.16 614.4 0 706.56 0 819.2S92.16 1024 204.8 1024s204.8-92.16 204.8-204.8-92.16-204.8-204.8-204.8z m0 358.4c-85.333 0-153.6-68.267-153.6-153.6s68.267-153.6 153.6-153.6 153.6 68.267 153.6 153.6-68.267 153.6-153.6 153.6zM1024 614.4c0-112.64-92.16-204.8-204.8-204.8-30.72 0-61.44 6.827-88.747 20.48l78.507-78.507c37.547-37.546 61.44-88.746 61.44-143.36 0-112.64-92.16-204.8-204.8-204.8-58.027 0-109.227 23.894-143.36 61.44l37.547 37.547c27.306-27.307 64.853-44.373 109.226-44.373C750.933 51.2 819.2 119.467 819.2 204.8c0 40.96-17.067 81.92-44.373 109.227L614.4 474.453V460.8c0-112.64-92.16-204.8-204.8-204.8h-13.653L556.373 95.573l-37.546-37.546L273.067 307.2c-44.374 37.547-68.267 92.16-68.267 153.6 0 112.64 92.16 204.8 204.8 204.8 34.133 0 64.853-6.827 92.16-20.48l-20.48 20.48c-44.373 37.547-71.68 92.16-71.68 153.6 0 112.64 92.16 204.8 204.8 204.8 58.027 0 109.227-23.893 143.36-61.44l204.8-204.8c37.547-34.133 61.44-85.333 61.44-143.36zM256 460.8c0-40.96 13.653-75.093 40.96-102.4l13.653-13.653c27.307-23.894 61.44-37.547 98.987-37.547 85.333 0 153.6 68.267 153.6 153.6s-68.267 153.6-153.6 153.6S256 546.133 256 460.8z m358.4 512c-85.333 0-153.6-68.267-153.6-153.6 0-37.547 13.653-75.093 37.547-102.4L512 703.147c27.307-23.894 61.44-37.547 98.987-37.547 85.333 0 153.6 68.267 153.6 153.6S699.733 972.8 614.4 972.8z m204.8-139.947V819.2c0-112.64-92.16-204.8-204.8-204.8h-13.653l109.226-109.227C737.28 477.867 774.827 460.8 819.2 460.8c85.333 0 153.6 68.267 153.6 153.6 0 40.96-17.067 81.92-44.373 109.227L819.2 832.853zM409.6 358.4c-58.027 0-102.4 44.373-102.4 102.4s44.373 102.4 102.4 102.4S512 518.827 512 460.8s-44.373-102.4-102.4-102.4z m0 153.6c-27.307 0-51.2-23.893-51.2-51.2s23.893-51.2 51.2-51.2 51.2 23.893 51.2 51.2-23.893 51.2-51.2 51.2zM204.8 716.8c-58.027 0-102.4 44.373-102.4 102.4s44.373 102.4 102.4 102.4 102.4-44.373 102.4-102.4-44.373-102.4-102.4-102.4z m0 153.6c-27.307 0-51.2-23.893-51.2-51.2s23.893-51.2 51.2-51.2 51.2 23.893 51.2 51.2-23.893 51.2-51.2 51.2z m409.6-153.6c-58.027 0-102.4 44.373-102.4 102.4s44.373 102.4 102.4 102.4 102.4-44.373 102.4-102.4-44.373-102.4-102.4-102.4z m0 153.6c-27.307 0-51.2-23.893-51.2-51.2s23.893-51.2 51.2-51.2 51.2 23.893 51.2 51.2-23.893 51.2-51.2 51.2z" fill="#d4237a" p-id="8251"></path></svg>      </div>
        原料信息不全

      <div class="card-body">
        <count-to :start-val="0" :end-val="number" :duration="2600" class="card-panel-num"/>
      </div>

    </router-link>
  </div>

</template>

<script>
  import CountTo from 'vue-count-to'
  export default {
    data(){
      return {
        number: 0,
        relations: ["creator","product","product.category","material"] ,
        filters:[
        ],
      }
    },

    props: {
      mine: {
        type: Object,
      }
    },
    components: {
      CountTo
    },

    mounted(){
      this.$nextTick(() => {
        this.initData();
      })
    },

    methods: {
      initData(){
        let countUrl = "products/countUnfinishedMaterials";
        countUrl += "?relations=" + JSON.stringify(this.relations);
        countUrl += "&filters=" + JSON.stringify({"groupOp": "AND", "rules": this.filters});
        this.global.axios
          .get(countUrl)
          .then(resp => {
            this.number = resp.data;
          })
          .catch(err => {
          })
      }
    }
  }
</script>

<style lang="scss" scoped>
  @import "@/assets/css/panel.less";
</style>
