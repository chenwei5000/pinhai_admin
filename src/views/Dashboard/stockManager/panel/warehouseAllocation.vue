<template>

  <div class="card-panel">
    <router-link to="/m3/WarehouseAllocation_index?s=executing">

      <div class="card-header">
        <svg t="1571909073306" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18897" width="40" height="40"><path d="M810.87968 213.333671a85.333298 85.333298 0 0 1 75.818635 46.165314l85.119965 164.650598a85.333298 85.333298 0 0 1 9.514662 39.167984V938.666702a85.333298 85.333298 0 0 1-85.333298 85.333298H127.999964a85.333298 85.333298 0 0 1-85.333297-85.333298V465.493566a85.333298 85.333298 0 0 1 9.045329-38.271984l83.626632-166.826597A85.333298 85.333298 0 0 1 211.626596 213.333671h599.253084zM399.359851 500.480218c-18.773326 39.679983-47.35998 74.666636-85.759964 104.53329l11.519995 38.82665c51.199979-37.546651 87.893297-80.2133 109.226621-127.146613l-34.986652-16.213327z m15.359994 98.559959c-21.333324 46.933314-53.759978 88.319963-97.279959 123.733282l11.519995 38.399984c15.78666-12.373328 30.719987-25.173323 44.799981-38.826651v172.373262h38.826651v-216.746576c14.506661-19.626658 26.879989-40.533316 36.693318-62.719974l-34.559986-16.213327z m144.213273-96.426626v43.093315H467.199823v37.119984h91.733295v43.946649H451.83983v37.546651h255.999893v-37.546651h-110.079954v-43.946649h92.586628v-37.119984h-92.586628v-43.093315h-38.826651z m-105.813289 204.373248v37.973317h162.133266v90.879962c0 13.653328-6.826664 20.906658-20.053325 20.906658-17.493326 0-35.839985-0.853333-55.466644-2.559999l9.386663 38.826651h60.586641c30.293321 0 45.653314-15.78666 45.653315-47.35998v-100.693292h46.506647v-37.973317h-46.506647v-28.159989h-40.10665v28.159989h-162.133266z m55.466644 48.639979l-31.573321 20.053325c22.613324 23.466657 40.533316 44.799981 54.186644 63.999974l31.573321-22.186658c-12.799995-17.493326-30.719987-37.973318-54.186644-61.866641zM199.679935 344.661616a44.629315 44.629315 0 0 0 39.97865 64.42664h547.455771a44.245315 44.245315 0 0 0 39.423984-64.42664l-9.258663-18.047992a85.333298 85.333298 0 0 0-75.946635-46.378647H284.586566a85.333298 85.333298 0 0 0-76.458635 47.402646l-8.447996 17.06666z" p-id="18898"></path><path d="M692.053063 112.213713a20.735991 20.735991 0 0 1-18.645326 11.306662h-72.106636v200.106583a20.479991 20.479991 0 0 1-20.266659 20.607992H455.082495a20.479991 20.479991 0 0 1-20.266658-20.607992v-200.106583H362.666533a20.735991 20.735991 0 0 1-18.645325-11.306662 21.674658 21.674658 0 0 1 0.64-22.186657C449.91983 29.867081 507.73314-0.127573 518.101135 0.000427c10.709329 0 68.522638 29.994654 173.397261 90.026629 4.266665 6.954664 4.479998 14.975994 0.554667 22.186657z" p-id="18899"></path></svg>
      </div>
        待调拨出库

      <div class="card-body">
        <count-to :start-val="0" :end-val="number" :duration="2600" class="card-panel-num"/>
      </div>

    </router-link>
  </div>

</template>

<script>
  import CountTo from 'vue-count-to'
  export default {
    data(){
      return {
        number: 0,
        relations: ["team","fromWarehouse","toWarehouse"] ,
        filters:[
          {"field": "status", "op": "in", "data": "1,2,3"}
        ],
      }
    },

    props: {
      mine: {
        type: Object,
      }
    },
    components: {
      CountTo
    },

    mounted(){
      this.$nextTick(() => {
        this.initData();
      })
    },

    methods: {
      initData(){
        let countUrl = "warehouseAllocations/count";
        countUrl += "?relations=" + JSON.stringify(this.relations);
        countUrl += "&filters=" + JSON.stringify({"groupOp": "AND", "rules": this.filters});
        this.global.axios
          .get(countUrl)
          .then(resp => {
            this.number = resp.data;
          })
          .catch(err => {
          })
      }
    }
  }
</script>

<style lang="scss" scoped>
  @import "@/assets/css/panel.less";
</style>
