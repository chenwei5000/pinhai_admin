<template>

  <div class="card-panel">
    <router-link to="/m9/ExportAllocation_index?s=executing">
      <div class="card-header">
        <svg t="1571909143488" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21116" width="38" height="38"><path d="M1003.644308 25.159104C989.237201 10.751997 963.594541 2.147555 934.60966 2.147555c-29.866658 0-89.24442 9.386664-151.381291 72.277313L635.118188 222.86216 107.360112 169.727953a30.577769 30.577769 0 0 0-24.760882 8.988442L8.657918 254.222152a30.620436 30.620436 0 0 0-7.779554 28.629325 30.236436 30.236436 0 0 0 20.309328 21.631994l420.693216 133.589296-124.415965 152.661291-234.609713-11.448886c-8.149331 0-16.099551 3.342221-21.80266 9.187553l-38.712878 39.694212a30.435547 30.435547 0 0 0 9.784886 49.18043l222.947493 95.772418 83.015088 214.58483a30.26488 30.26488 0 0 0 28.344881 19.441772 30.577769 30.577769 0 0 0 21.688883-9.087998l38.855101-39.551989c5.688887-5.788443 8.789331-13.454218 8.718219-21.560882l-1.848888-227.967937 146.119071-123.818632 128.241742 417.379439A30.26488 30.26488 0 0 0 737.276382 1023.999716a30.577769 30.577769 0 0 0 21.717327-9.130665l73.98398-75.505756a30.435547 30.435547 0 0 0 8.59022-23.72266L799.342142 391.523447l149.731514-149.546625c87.651531-89.429308 88.021309-183.381282 54.570652-216.817718zM746.421268 358.456789a30.335992 30.335992 0 0 0-8.817775 23.950216l42.239988 524.287854-28.501325 29.084437L624.55108 523.206966a30.26488 30.26488 0 0 0-29.070214-21.47555c-7.196442 0-14.193774 2.559999-19.655106 7.210665l-192.170613 162.844399a30.293325 30.293325 0 0 0-10.751997 23.452438l1.806222 218.552828-67.527093-174.535062a30.535103 30.535103 0 0 0-16.355551-16.967107l-188.999058-81.208866 229.489714 11.207108a30.293325 30.293325 0 0 0 23.566215-11.192886l162.375066-199.224834a30.435547 30.435547 0 0 0-14.36444-48.199097L86.681007 261.475483l29.141325-29.767103 527.573187 53.119985a30.577769 30.577769 0 0 0 24.547549-8.760886L826.392802 117.475523c46.478209-47.06132 88.177753-54.087096 108.885303-54.087096 15.13244 0 23.921771 3.697777 24.903104 4.479999 0.071111 0.099556 6.698665 11.406219 1.194666 37.759989-4.465777 21.418661-17.749328 55.082651-55.594651 93.724419L746.421268 358.456789z" fill="#836e36" p-id="21117"></path></svg>
      </div>
      待出口
      <div class="card-body">
        <count-to :start-val="0" :end-val="number" :duration="2600" class="card-panel-num"/>
      </div>

    </router-link>
  </div>

</template>

<script>
  import CountTo from 'vue-count-to'
  export default {
    data(){
      return {
        number: 0,
        relations: ["team","linerShippingPlan","fromWarehouse","toWarehouse"] ,
        filters:[
          {"field":"status","op":"in","data":3}
          ],
      }
    },

    props: {
      mine: {
        type: Object,
      }
    },
    components: {
      CountTo
    },

    mounted(){
      this.$nextTick(() => {
        this.initData();
      })
    },

    methods: {
      initData(){
        let countUrl = "exportAllocations/count";
        countUrl += "?relations=" + JSON.stringify(this.relations);
        countUrl += "&filters=" + JSON.stringify({"groupOp": "AND", "rules": this.filters});
        this.global.axios
          .get(countUrl)
          .then(resp => {
            this.number = resp.data;
          })
          .catch(err => {
          })
      }
    }
  }
</script>

<style lang="scss" scoped>
  @import "@/assets/css/panel.less";
</style>
