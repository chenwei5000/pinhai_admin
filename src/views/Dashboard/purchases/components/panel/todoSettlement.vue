<template>

  <div class="card-panel">
    <router-link to="/m2/SettlementBill_index?s=inpayment">
      <div class="card-header">
        <div class="card-badge icon-red">
          <svg t="1571906379569" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6655" width="32" height="32"><path d="M540.105143 0L1024 483.913143V1024L0 0h540.105143z m359.113143 532.004571l9.453714-9.472-44.196571-44.178285 11.593142-5.12-8.484571-13.165715a113.901714 113.901714 0 0 1-45.750857 12.214858l3.236571 15.067428a142.08 142.08 0 0 0 25.124572-4.352l11.794285 11.776a131.547429 131.547429 0 0 1-4.662857 22.345143l12.708572 5.888c1.261714-4.973714 2.486857-10.532571 3.273143-16.914286l25.910857 25.910857z m-85.632 88.393143l-35.181715-35.218285 10.386286-10.386286 18.468572 18.468571 60.928-60.928-102.034286-102.052571-60.928 60.928 19.675428 19.693714-6.052571 6.070857a71.04 71.04 0 0 1-4.644571 4.022857l-37.997715-37.997714-9.929143 9.929143 35.2 35.218286a51.309714 51.309714 0 0 1-8.539428 1.993143c-8.96 0.329143-20.48-3.382857-34.432-11.154286l-3.072 14.592c15.323429 8.539429 28.672 12.525714 39.990857 11.757714 6.034286-0.438857 11.958857-2.322286 18.011429-5.266286l44.013714 44.050286-26.221714 26.203429 11.026285 11.008 26.221715-26.221715 35.181714 35.218286 9.929143-9.929143z m-209.261715-138.605714l10.861715 10.88 62.317714-62.317714-66.212571-66.212572-62.317715 62.317715 10.971429 11.026285 7.460571-7.460571 44.342857 44.361143-7.424 7.424z m-102.052571-135.497143l-9.453714 12.251429c23.881143 16.457143 46.372571 29.604571 67.913143 39.68l10.550857-10.514286c-21.577143-10.112-44.507429-23.734857-69.010286-41.398857z m-66.596571-35.291428c9.929143 9.929143 20.114286 9.929143 30.226285-0.146286l39.844572-39.862857 18.157714 18.139428 10.386286-10.368-18.139429-18.157714 11.465143-11.465143-11.172571-11.172571-11.465143 11.483428-60.178286-60.178285-10.368 10.404571 60.16 60.16-37.065143 37.065143c-5.266286 5.266286-10.697143 5.412571-15.817143 0.310857a462.134857 462.134857 0 0 1-19.84-21.394286l-8.228571 13.165715 22.034286 22.016z m-3.108572-90.258286a282.697143 282.697143 0 0 1-3.876571 43.885714l14.884571 2.486857c1.828571-11.154286 2.925714-25.6 3.108572-43.099428l-14.116572-3.291429z m-81.572571 7.131428l10.697143 10.733715 78.482285-78.482286a172.672 172.672 0 0 0 37.668572-9.782857l-5.12-14.098286c-25.124571 9.6-52.882286 12.873143-83.108572 9.6l-7.442285 13.970286c11.776 1.536 23.405714 2.322286 34.870857 1.993143l-66.048 66.084571zM430.994286 101.668571l-7.442286 13.952c31.158857 4.827429 59.245714 2.505143 84.352-6.491428l-5.266286-14.262857c-21.577143 7.899429-45.293714 10.221714-71.643428 6.802285z m112.091428 68.699429l-34.56-34.56-10.093714 10.057143 34.596571 34.596571-19.401142 19.364572-40.466286-40.448-10.24 10.203428 92.452571 92.434286 10.221715-10.24-41.252572-41.234286 19.382857-19.382857 34.907429 34.889143 10.057143-10.075429-34.889143-34.889142 16.896-16.896-10.697143-10.715429-16.896 16.896z m117.504 91.428571l-6.345143-14.445714c-24.685714 12.251429-48.402286 21.12-71.350857 26.697143a16.694857 16.694857 0 0 1-8.832-0.457143l-7.424 13.037714c10.203429 7.734857 20.278857 15.341714 30.518857 22.784-23.259429 5.888-40.777143 8.832-52.699428 8.996572a28.598857 28.598857 0 0 1-8.411429-1.865143l-7.131428 13.037714c17.536 13.494857 37.540571 25.709714 60.032 36.736l9.929143-9.929143a390.820571 390.820571 0 0 1-44.214858-25.6c20.644571-1.682286 51.017143-8.502857 91.355429-20.589714l-6.217143-13.366857c-8.996571 2.816-17.810286 5.430857-26.349714 8.082286a775.277714 775.277714 0 0 1-25.289143-18.761143c20.187429-4.041143 44.361143-12.105143 72.411429-24.356572z m37.851429 69.156572l-37.065143-37.046857-10.88 10.861714 37.065143 37.065143-22.930286 22.930286L632.685714 332.8l-10.861714 10.861714 75.684571 75.666286 10.843429-10.843429-32.402286-32.420571 22.930286-22.948571 36.900571 36.918857 10.88-10.861715-36.937142-36.937142 18.779428-18.742858-11.300571-11.337142-18.761143 18.779428z m106.605714 65.993143c-15.981714 7.606857-33.645714 11.648-53.028571 12.105143l3.565714 15.049142a143.36 143.36 0 0 0 30.390857-4.352l11.940572 11.940572c-1.097143 7.296-2.651429 14.427429-4.498286 21.248l12.708571 5.906286c1.261714-4.662857 2.176-9.929143 2.925715-15.981715l20.352 20.297143 9.453714-9.453714-38.454857-38.454857c4.169143-1.700571 8.685714-3.419429 13.019428-5.266286l-8.356571-13.037714z m9.618286 167.186285l-9.618286 9.6-80.347428-80.329142 9.636571-9.6 80.329143 80.329142z m16.749714-16.749714l-8.685714 8.685714-80.329143-80.329142 8.667429-8.685715 80.347428 80.329143z m17.206857-17.225143l-9.307428 9.289143-80.329143-80.329143 9.289143-9.289143 80.347428 80.329143z m-118.637714-2.011428l6.070857-6.052572 41.691429 41.691429-10.386286 10.422857-42.020571-42.057143c1.536-1.206857 3.108571-2.450286 4.644571-3.986286z m-118.253714-142.445715l44.361143 44.342858-33.828572 33.828571-44.342857-44.361143 33.828571-33.828571z" fill="#BF5FDE" p-id="6656"></path></svg>
        </div>
        待结算
      <div class="card-body">
          <count-to :start-val="0" :end-val="number" :duration="2600" class="card-panel-num"/>
      </div>
      </div>
    </router-link>
  </div>

</template>

<script>
  import CountTo from 'vue-count-to'

  export default {
    data(){
      return {
        number: 0,
        relations: [],
        filters: [
          {"field": "status", "op": "in", "data": "0"}
        ],
      }
    },
    props: {
      mine: {
        type: Object,
        default: {merchantId: '', categoryId: '', week: '20'}
      }
    },
    components: {
      CountTo
    },

     mounted(){
      this.$nextTick(() => {
        this.initData();
      })
    },

    methods: {
      initData(){
        let countUrl = "/settlementBills/count";
        countUrl += "?relations=" + JSON.stringify(this.relations);
        countUrl += "&filters=" + JSON.stringify({"groupOp": "AND", "rules": this.filters});
         this.global.axios
          .get(countUrl)
          .then(resp => {
            this.number = resp.data;
          })
          .catch(err => {
          })
      }
    }
  }
</script>

<style lang="scss" scoped>
  @import "@/assets/css/panel.less";
</style>
